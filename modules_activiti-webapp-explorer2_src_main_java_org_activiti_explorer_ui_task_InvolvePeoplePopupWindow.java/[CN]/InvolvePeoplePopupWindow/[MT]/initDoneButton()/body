{
  doneButton=new Button("Done");
  doneButton.addListener(new ClickListener(){
    public void buttonClick(    ClickEvent event){
      Collection<String> selectedUserIds=(Collection<String>)selectedUsersTable.getItemIds();
      for (      String userId : selectedUserIds) {
        String role=(String)((ComboBox)selectedUsersTable.getItem(userId).getItemProperty("role").getValue()).getValue();
        taskService.addUserIdentityLink(task.getId(),userId,role);
      }
      close();
      if (selectedUserIds.size() > 0) {
        fireEvent(new SubmitEvent(doneButton,SubmitEvent.SUBMITTED));
      }
    }
  }
);
  addComponent(doneButton);
  windowLayout.setComponentAlignment(doneButton,Alignment.MIDDLE_RIGHT);
}
