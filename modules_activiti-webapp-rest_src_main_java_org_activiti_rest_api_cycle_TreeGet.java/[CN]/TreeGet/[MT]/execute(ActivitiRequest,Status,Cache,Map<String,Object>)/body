{
  RepositoryNodeCollection rootNodes=this.repositoryService.getChildren("/","");
  List<TreeFolderDto> tree=new ArrayList<TreeFolderDto>();
  for (  RepositoryNode repositoryNode : rootNodes.asList()) {
    tree.add(new TreeFolderDto((RepositoryFolder)repositoryNode));
  }
  String connectorId=req.getString("connectorId");
  String nodeId=req.getString("nodeId");
  if (connectorId != null && nodeId != null) {
    try {
      expandTree(tree,connectorId,nodeId);
    }
 catch (    Exception e) {
      log.log(Level.WARNING,"Could not expand tree " + e.getMessage(),e);
    }
  }
  model.put("tree",tree);
}
