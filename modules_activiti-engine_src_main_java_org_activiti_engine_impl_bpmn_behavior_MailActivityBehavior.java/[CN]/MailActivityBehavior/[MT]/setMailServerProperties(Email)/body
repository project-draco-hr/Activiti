{
  ProcessEngineContext processEngineContext=Context.getProcessEngineContext();
  String host=processEngineContext.getMailServerHost();
  if (host == null) {
    throw new ActivitiException("Could not send email: no SMTP host is configured");
  }
  email.setHostName(host);
  int port=processEngineContext.getMailServerPort();
  email.setSmtpPort(port);
  String user=processEngineContext.getMailServerUsername();
  String password=processEngineContext.getMailServerPassword();
  if (user != null && password != null) {
    email.setAuthentication(user,password);
  }
}
