{
  String personalTaskUserId=req.getString("assignee");
  String candidateTaskUserId=req.getString("candidate");
  String candidateGroupId=req.getString("candidate-group");
  int start=req.getInt("start",0);
  int size=req.getInt("size",10);
  TaskQuery tq=getTaskService().createTaskQuery();
  if (personalTaskUserId != null) {
    tq.assignee(personalTaskUserId);
  }
 else   if (candidateTaskUserId != null) {
    tq.candidateUser(candidateTaskUserId);
  }
 else   if (candidateGroupId != null) {
    tq.candidateGroup(candidateGroupId);
  }
 else {
    throw new WebScriptException(Status.STATUS_BAD_REQUEST,"Tasks must be filtered with 'assignee', 'candidate' or 'candidate-group'");
  }
  model.put("tasks",tq.listPage(start,size));
  model.put("start",start);
  model.put("total",tq.count());
  model.put("size",size);
}
