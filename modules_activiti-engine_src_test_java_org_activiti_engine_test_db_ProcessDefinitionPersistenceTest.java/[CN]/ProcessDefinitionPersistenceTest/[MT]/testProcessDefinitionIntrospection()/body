{
  String deploymentId=repositoryService.createDeployment().addClasspathResource("org/activiti/engine/test/db/processOne.bpmn20.xml").deploy().getId();
  ReadOnlyProcessDefinition processDefinition=repositoryService.getDeployedProcessDefinition("processOne:1");
  assertEquals("processOne:1",processDefinition.getId());
  PvmActivity start=processDefinition.findActivity("start");
  assertNotNull(start);
  assertEquals("start",start.getId());
  assertEquals(Collections.EMPTY_LIST,start.getActivities());
  List<PvmTransition> outgoingTransitions=start.getOutgoingTransitions();
  assertEquals(1,outgoingTransitions.size());
  PvmActivity end=processDefinition.findActivity("end");
  assertNotNull(end);
  assertEquals("end",end.getId());
  PvmTransition transition=outgoingTransitions.get(0);
  assertEquals("flow1",transition.getId());
  assertSame(start,transition.getSource());
  assertSame(end,transition.getDestination());
  repositoryService.deleteDeployment(deploymentId);
}
