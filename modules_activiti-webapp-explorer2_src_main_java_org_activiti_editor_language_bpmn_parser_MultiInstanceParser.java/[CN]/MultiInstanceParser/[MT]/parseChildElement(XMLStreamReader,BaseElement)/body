{
  if (parentElement instanceof Activity == false)   return;
  MultiInstanceLoopCharacteristics multiInstanceDef=new MultiInstanceLoopCharacteristics();
  if (xtr.getAttributeValue(null,"isSequential") != null) {
    multiInstanceDef.setSequential(Boolean.valueOf(xtr.getAttributeValue(null,"isSequential")));
  }
  multiInstanceDef.setInputDataItem(xtr.getAttributeValue(ACTIVITI_EXTENSIONS_NAMESPACE,"collection"));
  multiInstanceDef.setElementVariable(xtr.getAttributeValue(ACTIVITI_EXTENSIONS_NAMESPACE,"elementVariable"));
  boolean readyWithMultiInstance=false;
  try {
    while (readyWithMultiInstance == false && xtr.hasNext()) {
      xtr.next();
      if (xtr.isStartElement() && "loopCardinality".equalsIgnoreCase(xtr.getLocalName())) {
        multiInstanceDef.setLoopCardinality(xtr.getElementText());
      }
 else       if (xtr.isStartElement() && "loopDataInputRef".equalsIgnoreCase(xtr.getLocalName())) {
        multiInstanceDef.setInputDataItem(xtr.getElementText());
      }
 else       if (xtr.isStartElement() && "inputDataItem".equalsIgnoreCase(xtr.getLocalName())) {
        if (xtr.getAttributeValue(null,"name") != null) {
          multiInstanceDef.setElementVariable(xtr.getAttributeValue(null,"name"));
        }
      }
 else       if (xtr.isStartElement() && "completionCondition".equalsIgnoreCase(xtr.getLocalName())) {
        multiInstanceDef.setCompletionCondition(xtr.getElementText());
      }
 else       if (xtr.isEndElement() && getElementName().equalsIgnoreCase(xtr.getLocalName())) {
        readyWithMultiInstance=true;
      }
    }
  }
 catch (  Exception e) {
    LOGGER.log(Level.WARNING,"Error parsing multi instance definition",e);
  }
  ((Activity)parentElement).setLoopCharacteristics(multiInstanceDef);
}
