{
  RepositoryArtifactType artifactType=null;
  String extension=path;
  RepositoryArtifactTypes artifactTypes=CycleApplicationContext.get(RepositoryArtifactTypes.class);
  while (extension.contains(".")) {
    extension=extension.substring(extension.indexOf(".") + 1);
    artifactType=artifactTypes.getTypeForFilename(extension);
    if (artifactType != null && !artifactType.getMimeType().equals(new UnknownMimeType())) {
      break;
    }
  }
  if (artifactType == null) {
    return new BasicRepositoryArtifactType(CycleApplicationContext.get(UnknownMimeType.class));
  }
  return artifactType;
}
