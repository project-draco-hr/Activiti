{
  MimeType mimeType=null;
  String extension=path;
  Mimetypes mimeTypes=CycleApplicationContext.get(Mimetypes.class);
  MimeType unknownMimeType=CycleApplicationContext.get(UnknownMimeType.class);
  while (extension.contains(".")) {
    extension=extension.substring(extension.indexOf(".") + 1);
    mimeType=mimeTypes.getTypeForFilename(extension);
    if (mimeType != null && !mimeType.equals(unknownMimeType)) {
      break;
    }
  }
  if (mimeType == null) {
    return unknownMimeType;
  }
  return mimeType;
}
