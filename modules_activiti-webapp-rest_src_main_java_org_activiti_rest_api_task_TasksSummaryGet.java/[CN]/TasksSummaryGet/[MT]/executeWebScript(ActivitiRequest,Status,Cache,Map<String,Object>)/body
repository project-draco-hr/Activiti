{
  String user=req.getMandatoryString("user");
  TaskService ts=getTaskService();
  GroupQuery query=getIdentityService().createGroupQuery().groupMember(user);
  String assignmentGroupType=config.getAssignmentGroupTypeId();
  if (assignmentGroupType != null) {
    query.groupType(assignmentGroupType);
  }
  List<Group> groups=query.list();
  Map<String,Long> unassignedByGroup=new HashMap<String,Long>();
  long tasksInGroup;
  for (  Group group : groups) {
    tasksInGroup=ts.createTaskQuery().taskCandidateGroup(group.getId()).count();
    unassignedByGroup.put(group.getId(),tasksInGroup);
  }
  model.put("unassignedByGroup",unassignedByGroup);
  model.put("unassigned",ts.createTaskQuery().taskCandidateUser(user).count());
  model.put("assigned",ts.createTaskQuery().taskAssignee(user).count());
}
