{
  String packageName=getClass().getPackage().getName();
  String path="src/test/resources/" + packageName.replace(".","/");
  String inputFileName=path + "/sub-process-parent.json";
  String expectedFileName=path + "/" + getClass().getSimpleName()+ ".testTransform.expected.json";
  String input=IoUtils.readText(new FileInputStream(inputFileName));
  String expected=IoUtils.readText(new FileInputStream(expectedFileName));
  FileSystemConnector repositoryConnector=new SignavioFileSystemConnector();
  repositoryConnector.startConfiguration();
  repositoryConnector.addConfigurationEntry(FileSystemConnector.CONFIG_KEY_BASE_PATH,new File(path).getAbsolutePath());
  repositoryConnector.configurationFinished();
  JsonTransformer jsonTransformer=new JsonTransformer();
  jsonTransformer.addJsonTransformation(new SubProcessExpansion(repositoryConnector));
  String actual=jsonTransformer.transform(input).toString(4);
  assertEquals(expected,actual);
}
