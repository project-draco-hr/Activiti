{
  DeploymentEntityManager deploymentEntityManager=Context.getCommandContext().getDeploymentEntityManager();
  if (deploymentEntityManager.findDeploymentById(deploymentId) == null)   throw new ActivitiObjectNotFoundException("Could not find a deployment with id '" + deploymentId + "'.",DeploymentEntity.class);
  List<ProcessDefinition> processDefinitions=new ProcessDefinitionQueryImpl(Context.getCommandContext()).deploymentId(deploymentId).list();
  for (  ProcessDefinition processDefinition : processDefinitions) {
    processDefinitionCache.remove(processDefinition.getId());
  }
  deploymentEntityManager.deleteDeployment(deploymentId,cascade);
}
