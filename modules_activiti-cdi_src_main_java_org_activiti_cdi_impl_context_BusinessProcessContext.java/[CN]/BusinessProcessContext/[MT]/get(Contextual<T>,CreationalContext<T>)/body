{
  Bean<T> bean=(Bean<T>)contextual;
  String variableName=bean.getName();
  BusinessProcess businessProcess=getBusinessProcess();
  Object variable=businessProcess.getVariable(variableName);
  if (variable != null) {
    if (logger.isLoggable(Level.FINE)) {
      if (businessProcess.isAssociated()) {
        logger.fine("Getting instance of bean '" + variableName + "' from Execution["+ businessProcess.getExecutionId()+ "].");
      }
 else {
        logger.fine("Getting instance of bean '" + variableName + "' from transient bean store");
      }
    }
    return (T)variable;
  }
 else {
    if (logger.isLoggable(Level.FINE)) {
      if (businessProcess.isAssociated()) {
        logger.fine("Creating instance of bean '" + variableName + "' in business process context representing Execution["+ businessProcess.getExecutionId()+ "].");
      }
 else {
        logger.fine("Creating instance of bean '" + variableName + "' in transient bean store");
      }
    }
    T beanInstance=bean.create(arg1);
    businessProcess.setVariable(variableName,beanInstance);
    return beanInstance;
  }
}
