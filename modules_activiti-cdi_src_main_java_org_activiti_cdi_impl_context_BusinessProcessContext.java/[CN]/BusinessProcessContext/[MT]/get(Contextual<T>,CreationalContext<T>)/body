{
  Bean<T> bean=(Bean<T>)contextual;
  String variableName=bean.getName();
  BusinessProcess businessProcess=getBusinessProcess();
  Object variable=businessProcess.getProcessVariable(variableName);
  if (variable != null) {
    if (logger.isLoggable(Level.FINE)) {
      logger.fine("Getting instance of bean '" + variableName + "' in business process context representing ProcessInstance["+ businessProcess.getProcessInstanceId()+ "].");
    }
    return (T)variable;
  }
 else {
    if (logger.isLoggable(Level.FINE)) {
      logger.fine("Creating instance of bean '" + variableName + "' in business process context representing ProcessInstance["+ businessProcess.getProcessInstanceId()+ "].");
    }
    T beanInstance=bean.create(arg1);
    businessProcess.setProcessVariable(bean.getName(),beanInstance);
    return beanInstance;
  }
}
