{
  HttpURLConnection urlConnection=null;
  try {
    String authHeaderValue=username + ":" + password;
    String encodedAuthHeaderValue=new String(Base64.encodeBase64(authHeaderValue.getBytes()));
    urlConnection=(HttpURLConnection)new URL(baseContextUrl + contextPath).openConnection();
    urlConnection.addRequestProperty("Auth","Basic " + encodedAuthHeaderValue);
    InputStream stream=urlConnection.getInputStream();
    return new String(IoUtil.readInputStream(stream,"test servlet response"));
  }
 catch (  Exception e) {
    int responseCode=-1;
    String responseMessage=null;
    try {
      responseCode=urlConnection.getResponseCode();
      responseMessage=urlConnection.getResponseMessage();
    }
 catch (    IOException e2) {
      e.printStackTrace();
    }
    throw new RuntimeException("exception getting " + contextPath + " ("+ responseCode+ ") "+ responseMessage,e);
  }
}
