{
  variableInstance.setValue(value);
  CommandContext commandContext=CommandContext.getCurrent();
  int historyLevel=commandContext.getProcessEngineConfiguration().getHistoryLevel();
  if (historyLevel == ProcessEngineConfigurationImpl.HISTORYLEVEL_FULL) {
    DbSqlSession dbSqlSession=commandContext.getDbSqlSession();
    HistoricVariableUpdateEntity historicVariableUpdate=new HistoricVariableUpdateEntity(variableInstance,dbSqlSession);
    initializeActivityInstanceId(historicVariableUpdate);
    dbSqlSession.insert(historicVariableUpdate);
  }
}
