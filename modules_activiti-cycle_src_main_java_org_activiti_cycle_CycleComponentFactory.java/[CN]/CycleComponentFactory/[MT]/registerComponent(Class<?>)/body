{
  CycleComponent componentAnnotation=cycleComponentClass.getAnnotation(CycleComponent.class);
  String name=componentAnnotation.value();
  if (name == null)   name=componentAnnotation.name();
  if (name == null || name.length() == 0) {
    name=cycleComponentClass.getCanonicalName();
  }
  if (descriptorRegistry.containsKey(name)) {
    logger.log(Level.SEVERE,"Cannot register component of type '" + cycleComponentClass + "', name '"+ name+ "', copmonent of type '"+ descriptorRegistry.get(name)+ "', has same name.");
  }
  CycleComponentDescriptor componentDescriptor=new CycleComponentDescriptor(name,componentAnnotation.context(),cycleComponentClass);
  descriptorRegistry.put(name,componentDescriptor);
  for (  Class<?> componentType : componentTypes) {
    if (componentType.isAssignableFrom(cycleComponentClass)) {
      Set<String> componentNamesForThisTypeList=componentTypeMap.get(componentType);
      if (componentNamesForThisTypeList == null) {
        componentNamesForThisTypeList=new HashSet<String>();
        componentTypeMap.put(componentType,componentNamesForThisTypeList);
      }
      componentNamesForThisTypeList.add(name);
    }
  }
  return name;
}
