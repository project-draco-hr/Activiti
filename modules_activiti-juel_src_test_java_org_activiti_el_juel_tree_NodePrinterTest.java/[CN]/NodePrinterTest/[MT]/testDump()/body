{
  Tree tree=new Builder(Feature.METHOD_INVOCATIONS).build("${foo.bar[baz] + foobar}");
  StringWriter writer=new StringWriter();
  NodePrinter.dump(new PrintWriter(writer),tree.getRoot());
  String[] expected={"+- ${...}","   |","   +- '+'","      |","      +- [...]","      |  |","      |  +- . bar","      |  |  |","      |  |  +- foo","      |  |","      |  +- baz","      |","      +- foobar",null};
  BufferedReader reader=new BufferedReader(new StringReader(writer.toString()));
  for (  String line : expected) {
    assertEquals(line,reader.readLine());
  }
}
