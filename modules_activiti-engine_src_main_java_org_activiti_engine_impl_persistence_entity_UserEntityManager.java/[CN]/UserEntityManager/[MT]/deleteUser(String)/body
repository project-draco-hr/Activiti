{
  UserEntity user=findUserById(userId);
  if (user != null) {
    List<IdentityInfoEntity> identityInfos=getDbSqlSession().selectList("selectIdentityInfoByUserId",userId);
    for (    IdentityInfoEntity identityInfo : identityInfos) {
      getIdentityInfoManager().deleteIdentityInfo(identityInfo);
    }
    getDbSqlSession().delete("deleteMembershipsByUserId",userId);
    user.delete();
  }
}
