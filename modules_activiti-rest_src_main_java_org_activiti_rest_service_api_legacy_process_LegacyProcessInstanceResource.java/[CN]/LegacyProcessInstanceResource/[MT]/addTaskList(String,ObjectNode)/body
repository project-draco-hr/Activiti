{
  List<HistoricTaskInstance> taskList=ActivitiUtil.getHistoryService().createHistoricTaskInstanceQuery().processInstanceId(processInstanceId).orderByHistoricTaskInstanceStartTime().asc().list();
  if (taskList != null && !taskList.isEmpty()) {
    ArrayNode tasksJSON=new ObjectMapper().createArrayNode();
    responseJSON.put("tasks",tasksJSON);
    for (    HistoricTaskInstance historicTaskInstance : taskList) {
      ObjectNode taskJSON=new ObjectMapper().createObjectNode();
      taskJSON.put("taskId",historicTaskInstance.getId());
      taskJSON.put("taskDefinitionKey",historicTaskInstance.getTaskDefinitionKey());
      if (historicTaskInstance.getName() != null) {
        taskJSON.put("taskName",historicTaskInstance.getName());
      }
 else {
        taskJSON.putNull("taskName");
      }
      if (historicTaskInstance.getDescription() != null) {
        taskJSON.put("description",historicTaskInstance.getDescription());
      }
 else {
        taskJSON.putNull("description");
      }
      if (historicTaskInstance.getOwner() != null) {
        taskJSON.put("owner",historicTaskInstance.getOwner());
      }
 else {
        taskJSON.putNull("owner");
      }
      if (historicTaskInstance.getAssignee() != null) {
        taskJSON.put("assignee",historicTaskInstance.getAssignee());
      }
 else {
        taskJSON.putNull("assignee");
      }
      taskJSON.put("startTime",RequestUtil.dateToString(historicTaskInstance.getStartTime()));
      if (historicTaskInstance.getDueDate() != null) {
        taskJSON.put("dueDate",RequestUtil.dateToString(historicTaskInstance.getDueDate()));
      }
 else {
        taskJSON.putNull("dueDate");
      }
      if (historicTaskInstance.getEndTime() == null) {
        taskJSON.put("completed",false);
      }
 else {
        taskJSON.put("completed",true);
        taskJSON.put("endTime",RequestUtil.dateToString(historicTaskInstance.getEndTime()));
        taskJSON.put("duration",historicTaskInstance.getDurationInMillis());
      }
      tasksJSON.add(taskJSON);
    }
  }
}
