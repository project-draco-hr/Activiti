{
  if (userId != null && groupId != null) {
    throw new ActivitiException("userId and groupId cannot both be given.");
  }
  if (userId == null && groupId == null) {
    throw new ActivitiException("userId and groupId cannot both be null");
  }
  if (type == null) {
    throw new ActivitiException("Involvement type is required when adding a new task involvement");
  }
  if (TaskInvolvementType.ASSIGNEE.equals(type)) {
    if (userId == null) {
      throw new ActivitiException("When involving an assignee, the userId should always" + " be provided (but null was given)");
    }
    if (groupId != null) {
      throw new ActivitiException("Incompatible involvement: cannot use ASSIGNEE" + " together with a groupId");
    }
  }
}
