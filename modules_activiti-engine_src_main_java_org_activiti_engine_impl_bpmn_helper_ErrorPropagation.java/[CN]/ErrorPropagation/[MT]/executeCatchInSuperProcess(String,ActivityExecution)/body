{
  ActivityExecution outgoingExecution=superExecution;
  ActivityImpl catchingActivity=(ActivityImpl)outgoingExecution.getActivity();
  boolean found=false;
  while (!found && outgoingExecution != null && catchingActivity != null) {
    for (    ActivityImpl nestedActivity : catchingActivity.getActivities()) {
      if ("boundaryError".equals(nestedActivity.getProperty("type")) && (nestedActivity.getProperty("errorCode") == null || errorCode.equals(nestedActivity.getProperty("errorCode")))) {
        found=true;
        catchingActivity=nestedActivity;
      }
    }
    if (!found) {
      if (outgoingExecution.isConcurrent()) {
        outgoingExecution=outgoingExecution.getParent();
      }
 else       if (outgoingExecution.isScope()) {
        catchingActivity=catchingActivity.getParentActivity();
        outgoingExecution=outgoingExecution.getParent();
      }
    }
  }
  if (found) {
    outgoingExecution.executeActivity(catchingActivity);
  }
 else {
    ActivityExecution superSuperExecution=getSuperExecution(superExecution);
    if (superSuperExecution != null) {
      executeCatchInSuperProcess(errorCode,superSuperExecution);
    }
 else {
      throw new BpmnError(errorCode,"No catching boundary event found for error with errorCode '" + errorCode + "', neither in same process nor in parent process");
    }
  }
}
