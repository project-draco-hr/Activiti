{
  Date startTime=new Date();
  ProcessInstance pi=deployer.getProcessService().startProcessInstanceByKey("simpleSubProcess");
  Task subProcessTask=deployer.getTaskService().createTaskQuery().processInstance(pi.getId()).singleResult();
  assertEquals("Task in subprocess",subProcessTask.getName());
  Clock.setCurrentTime(new Date(startTime.getTime() + (2 * 60 * 60* 1000) + 1000));
  new JobExecutorPoller(deployer.getJobExecutor(),deployer.getCommandExecutor()).waitForJobExecutorToProcessAllJobs(5000L,25L);
  Task escalationTask=deployer.getTaskService().createTaskQuery().processInstance(pi.getId()).singleResult();
  assertEquals("Fix escalated problem",escalationTask.getName());
}
