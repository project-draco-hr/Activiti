{
  ProcessInstance processInstance=deployer.getProcessService().startProcessInstanceByKey("twoTasksProcess");
  Task task=deployer.getTaskService().createTaskQuery().singleResult();
  assertEquals("First task",task.getName());
  Map<String,Object> taskParams=new HashMap<String,Object>();
  taskParams.put("myParam","myValue");
  deployer.getTaskService().complete(task.getId(),taskParams);
  task=deployer.getTaskService().createTaskQuery().singleResult();
  assertEquals("Second task",task.getName());
  Map<String,Object> variables=deployer.getProcessService().getVariables(processInstance.getId());
  assertEquals(1,variables.size());
  assertEquals("myValue",variables.get("myParam"));
}
