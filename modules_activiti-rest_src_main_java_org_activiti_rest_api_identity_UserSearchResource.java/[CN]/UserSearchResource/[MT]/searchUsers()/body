{
  if (authenticate() == false)   return null;
  String searchText=(String)getRequest().getAttributes().get("searchText");
  if (searchText == null) {
    throw new ActivitiException("No searchText provided");
  }
  searchText="%" + searchText + "%";
  List<User> firstNameMatchList=ActivitiUtil.getIdentityService().createUserQuery().userFirstNameLike(searchText).list();
  List<User> lastNameMatchList=ActivitiUtil.getIdentityService().createUserQuery().userLastNameLike(searchText).list();
  Map<String,UserInfo> userMap=new HashMap<String,UserInfo>();
  if (firstNameMatchList != null) {
    for (    User user : firstNameMatchList) {
      userMap.put(user.getId(),new UserInfo(user));
    }
  }
  if (lastNameMatchList != null) {
    for (    User user : lastNameMatchList) {
      if (userMap.containsKey(user.getId()) == false) {
        userMap.put(user.getId(),new UserInfo(user));
      }
    }
  }
  List<UserInfo> userList=new ArrayList<UserInfo>();
  userList.addAll(userMap.values());
  Collections.sort(userList,new UserResponseComparable());
  DataResponse response=new DataResponse();
  response.setStart(0);
  response.setSize(userList.size());
  response.setSort("lastName");
  response.setOrder("asc");
  response.setTotal(userList.size());
  response.setData(userList);
  return response;
}
