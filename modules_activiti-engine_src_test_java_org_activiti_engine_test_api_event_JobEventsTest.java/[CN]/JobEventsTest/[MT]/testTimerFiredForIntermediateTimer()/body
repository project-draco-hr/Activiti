{
  ProcessInstance processInstance=runtimeService.startProcessInstanceByKey("testTimerFiredForIntermediateTimer");
  Calendar tomorrow=Calendar.getInstance();
  tomorrow.add(Calendar.DAY_OF_YEAR,1);
  processEngineConfiguration.getClock().setCurrentTime(tomorrow.getTime());
  waitForJobExecutorToProcessAllJobs(2000,100);
  boolean timerFired=false;
  for (  ActivitiEvent event : listener.getEventsReceived()) {
    if (ActivitiEventType.TIMER_FIRED.equals(event.getType())) {
      timerFired=true;
    }
  }
  assertTrue(timerFired);
}
