{
  if (connectorConfigurationId == null) {
    throw new IllegalArgumentException("connectorConfigurationId must not be null");
  }
  String currentUserId=getCurrentUserId();
  if (currentUserId == null) {
    throw new IllegalArgumentException("currentUserId must not be null. Set 'cuid' in Cycle Session Context.");
  }
  List<RepositoryConnectorConfiguration> configurations=getConnectorConfigurations();
  RepositoryConnectorConfiguration configuration=null;
  for (  RepositoryConnectorConfiguration repositoryConnectorConfiguration : configurations) {
    if (currentUserId.equals(repositoryConnectorConfiguration.getUserId()) && connectorConfigurationId.equals(repositoryConnectorConfiguration.getConnectorId())) {
      configuration=repositoryConnectorConfiguration;
    }
  }
  if (configuration == null) {
    throw new RuntimeException("Could not find connector configuration with id '" + connectorConfigurationId + "' for user '"+ currentUserId+ "'.");
  }
  return RepositoryConfigurationHandler.getValueMap(configuration,configuration.getPluginId());
}
