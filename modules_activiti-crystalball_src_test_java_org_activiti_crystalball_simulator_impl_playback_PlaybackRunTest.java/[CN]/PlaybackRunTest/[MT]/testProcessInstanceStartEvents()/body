{
  recordEvents();
  final SimpleSimulationRun.Builder builder=new SimpleSimulationRun.Builder();
  Clock clock=new ThreadLocalClock(new DefaultClockFactory());
  DefaultSimulationProcessEngineFactory simulationProcessEngineFactory=new DefaultSimulationProcessEngineFactory(THE_SIMPLEST_PROCESS,clock);
  final ProcessEngineImpl simProcessEngine=simulationProcessEngineFactory.getObject();
  builder.processEngine(simProcessEngine).eventCalendar((new SimpleEventCalendarFactory(clock,new SimulationEventComparator(),listener.getSimulationEvents())).getObject()).eventHandlers(getHandlers());
  SimpleSimulationRun simRun=builder.build();
  simRun.execute();
  checkStatus(simProcessEngine);
  simProcessEngine.getProcessEngineConfiguration().setDatabaseSchemaUpdate("create-drop");
  simProcessEngine.close();
  ProcessEngines.destroy();
}
