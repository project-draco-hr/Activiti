{
  DrawInstruction drawInstruction=activityDrawInstructions.get((String)activity.getProperty("type"));
  if (drawInstruction != null) {
    drawInstruction.draw(processDiagramCanvas,activity);
  }
  for (  PvmTransition sequenceFlow : activity.getOutgoingTransitions()) {
    List<Integer> waypoints=((TransitionImpl)sequenceFlow).getWaypoints();
    for (int i=2; i < waypoints.size(); i+=2) {
      boolean drawConditionalIndicator=i == 2 && sequenceFlow.getProperty(BpmnParse.PROPERTYNAME_CONDITION) != null;
      if (i < waypoints.size() - 2) {
        processDiagramCanvas.drawSequenceflowWithoutArrow(waypoints.get(i - 2),waypoints.get(i - 1),waypoints.get(i),waypoints.get(i + 1),drawConditionalIndicator);
      }
 else {
        processDiagramCanvas.drawSequenceflow(waypoints.get(i - 2),waypoints.get(i - 1),waypoints.get(i),waypoints.get(i + 1),drawConditionalIndicator);
      }
    }
  }
  for (  ActivityImpl nestedActivity : activity.getActivities()) {
    drawActivity(processDiagramCanvas,nestedActivity);
  }
}
