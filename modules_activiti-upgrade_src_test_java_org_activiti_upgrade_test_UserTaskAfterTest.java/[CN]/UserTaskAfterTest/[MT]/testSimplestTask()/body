{
  Task task=taskService.createTaskQuery().taskName("simpleTask2").singleResult();
  String processInstanceId=task.getProcessInstanceId();
  assertEquals(0,historyService.createHistoricTaskInstanceQuery().processInstanceId(processInstanceId).orderByTaskName().asc().count());
  taskService.complete(task.getId());
  assertEquals(1,runtimeService.createExecutionQuery().processInstanceId(processInstanceId).list().size());
  assertEquals(1,historyService.createHistoricTaskInstanceQuery().processInstanceId(processInstanceId).orderByTaskName().asc().count());
  task=taskService.createTaskQuery().taskName("simpleTask3").singleResult();
  taskService.complete(task.getId());
  assertEquals(0,runtimeService.createExecutionQuery().processInstanceId(processInstanceId).list().size());
  assertEquals(1,historyService.createHistoricTaskInstanceQuery().processInstanceId(processInstanceId).orderByTaskName().asc().count());
}
