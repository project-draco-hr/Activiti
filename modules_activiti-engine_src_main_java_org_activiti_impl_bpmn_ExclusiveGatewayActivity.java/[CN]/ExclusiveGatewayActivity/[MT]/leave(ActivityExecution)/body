{
  if (log.isLoggable(Level.FINE)) {
    log.fine("Leaving activity '" + execution.getActivity().getId() + "'");
  }
  Transition outgoingSeqFlow=null;
  Iterator<Transition> seqFlowIterator=execution.getOutgoingTransitions().iterator();
  while (outgoingSeqFlow == null && seqFlowIterator.hasNext()) {
    Transition seqFlow=seqFlowIterator.next();
    Condition condition=seqFlow.getCondition();
    if (condition == null || condition.evaluate(execution)) {
      if (log.isLoggable(Level.FINE)) {
        log.fine("Sequence flow '" + seqFlow.getId() + " '"+ "selected as outgoing sequence flow.");
      }
      outgoingSeqFlow=seqFlow;
    }
  }
  if (outgoingSeqFlow != null) {
    execution.take(outgoingSeqFlow);
  }
 else {
    throw new ActivitiException("No outgoing sequence flow of the exclusive gateway '" + execution.getActivity().getId() + "' could be selected for continuing the process");
  }
}
