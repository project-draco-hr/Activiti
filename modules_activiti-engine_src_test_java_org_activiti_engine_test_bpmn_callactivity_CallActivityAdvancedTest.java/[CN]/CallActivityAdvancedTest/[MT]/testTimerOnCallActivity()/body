{
  Date startTime=ClockUtil.getCurrentTime();
  runtimeService.startProcessInstanceByKey("timerOnCallActivity");
  TaskQuery taskQuery=taskService.createTaskQuery();
  Task taskInSubProcess=taskQuery.singleResult();
  assertEquals("Task in subprocess",taskInSubProcess.getName());
  ClockUtil.setCurrentTime(new Date(startTime.getTime() + (6 * 60 * 1000)));
  new JobExecutorPoller(processEngineConfiguration.getJobExecutor(),processEngineConfiguration.getCommandExecutor()).waitForJobExecutorToProcessAllJobs(5000L,25L);
  Task escalatedTask=taskQuery.singleResult();
  assertEquals("Escalated Task",escalatedTask.getName());
  taskService.complete(escalatedTask.getId());
  assertEquals(0,runtimeService.createProcessInstanceQuery().list().size());
}
