{
  ClassPathXmlApplicationContext applicationContext=new ClassPathXmlApplicationContext("org/activiti/spring/test/SpringAutoDeployTest-context.xml");
  RepositoryService repositoryService=(RepositoryService)applicationContext.getBean("repositoryService");
  List<ProcessDefinition> processDefinitions=repositoryService.createProcessDefinitionQuery().list();
  Set<String> processDefinitionKeys=new HashSet<String>();
  for (  ProcessDefinition processDefinition : processDefinitions) {
    processDefinitionKeys.add(processDefinition.getKey());
  }
  Set<String> expectedProcessDefinitionKeys=new HashSet<String>();
  expectedProcessDefinitionKeys.add("a");
  expectedProcessDefinitionKeys.add("b");
  expectedProcessDefinitionKeys.add("c");
  assertEquals(expectedProcessDefinitionKeys,processDefinitionKeys);
  String deploymentId=repositoryService.findDeployments().get(0).getId();
  repositoryService.deleteDeploymentCascade(deploymentId);
  applicationContext.destroy();
}
