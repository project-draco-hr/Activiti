{
  StreamResource.StreamSource streamSource=new StreamSource(){
    private static final long serialVersionUID=6993112534181068935L;
    public InputStream getStream(){
      WorkflowDefinitionConversion workflowDefinitionConversion=ExplorerApp.get().getWorkflowDefinitionConversionFactory().createWorkflowDefinitionConversion(createWorkflow());
      return workflowDefinitionConversion.getWorkflowDiagramImage();
    }
  }
;
  StreamResource imageresource=new StreamResource(streamSource,UUID.randomUUID() + ".png",ExplorerApp.get());
  diagram=new Embedded("",imageresource);
  diagram.setType(Embedded.TYPE_IMAGE);
  diagram.setSizeUndefined();
  mainLayout.addComponent(diagram);
}
