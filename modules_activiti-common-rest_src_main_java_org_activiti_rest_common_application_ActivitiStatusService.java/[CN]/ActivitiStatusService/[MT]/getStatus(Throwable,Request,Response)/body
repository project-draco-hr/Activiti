{
  Status status=null;
  if (throwable instanceof JsonMappingException && throwable.getCause() != null) {
    status=getSpecificStatus(throwable.getCause(),request,response);
  }
  if (status == null) {
    Throwable causeThrowable=null;
    if (throwable.getCause() != null && throwable.getCause() instanceof ActivitiException) {
      causeThrowable=throwable.getCause();
    }
 else {
      causeThrowable=throwable;
    }
    status=getSpecificStatus(causeThrowable,request,response);
  }
  return status != null ? status : Status.SERVER_ERROR_INTERNAL;
}
