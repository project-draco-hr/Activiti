{
  init(req);
  String connectorId=req.getMandatoryString("connectorId");
  String artifactId=req.getString("artifactId");
  String representationId=req.getString("representationId");
  RepositoryArtifact artifact=this.cycleService.getRepositoryArtifact(connectorId,artifactId);
  try {
    ContentRepresentation contentRepresentation=artifact.getArtifactType().getContentRepresentation(representationId);
switch (contentRepresentation.getRenderInfo()) {
case IMAGE:
case HTML:
      break;
case HTML_REFERENCE:
case BINARY:
case CODE:
case TEXT_PLAIN:
    String content=this.cycleService.getContent(connectorId,artifactId,contentRepresentation.getId()).asString();
  model.put("content",content);
}
model.put("connectorId",connectorId);
model.put("artifactId",artifactId);
model.put("renderInfo",contentRepresentation.getRenderInfo().name());
model.put("contentRepresentationId",contentRepresentation.getId());
model.put("contentType",contentRepresentation.getMimeType().getContentType());
}
 catch (Exception ex) {
log.log(Level.WARNING,"Exception while loading content representation",ex);
StringWriter sw=new StringWriter();
ex.printStackTrace(new PrintWriter(sw));
String stackTrace="Exception while accessing content. Details:\n\n" + sw.toString();
model.put("exception",stackTrace);
}
}
