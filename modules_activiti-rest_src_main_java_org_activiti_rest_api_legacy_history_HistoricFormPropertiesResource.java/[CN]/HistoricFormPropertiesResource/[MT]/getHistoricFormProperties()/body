{
  if (authenticate() == false)   return null;
  String taskId=(String)getRequest().getAttributes().get("taskId");
  HistoricDetailQuery createHistoricDetailQuery=ActivitiUtil.getHistoryService().createHistoricDetailQuery();
  List<HistoricDetail> list=createHistoricDetailQuery.taskId(taskId).formProperties().list();
  ObjectNode responseJSON=new ObjectMapper().createObjectNode();
  ArrayNode propertiesJSON=new ObjectMapper().createArrayNode();
  if (list != null) {
    for (    HistoricDetail historicDetail : list) {
      HistoricFormProperty property=(HistoricFormProperty)historicDetail;
      ObjectNode propertyJSON=new ObjectMapper().createObjectNode();
      propertyJSON.put("id",property.getPropertyId());
      propertyJSON.put("value",property.getPropertyValue());
      propertiesJSON.add(propertyJSON);
    }
  }
  responseJSON.put("data",propertiesJSON);
  return responseJSON;
}
