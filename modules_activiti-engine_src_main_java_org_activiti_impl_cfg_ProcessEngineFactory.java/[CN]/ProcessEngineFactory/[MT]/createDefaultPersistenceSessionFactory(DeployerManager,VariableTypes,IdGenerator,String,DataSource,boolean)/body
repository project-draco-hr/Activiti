{
  PersistenceSessionFactory persistenceSessionFactory=new IbatisPersistenceSessionFactory(variableTypes,idGenerator,databaseName,dataSource,localTransactions);
  persistenceSessionFactory=new CachingPersistenceSessionFactory(persistenceSessionFactory,deployerManager,Thread.currentThread().getContextClassLoader());
  return persistenceSessionFactory;
}
