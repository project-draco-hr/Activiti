{
  ObjectNode modelNode=null;
  String modelId=(String)getRequest().getAttributes().get("modelId");
  if (NumberUtils.isNumber(modelId)) {
    Model model=ProcessEngines.getDefaultProcessEngine().getRepositoryService().getModel(modelId);
    if (model != null) {
      try {
        modelNode=(ObjectNode)objectMapper.readTree(model.getMetaInfo());
        modelNode.put(MODEL_ID,model.getId());
        ObjectNode editorJsonNode=(ObjectNode)objectMapper.readTree(new String(model.getEditorSource(),"utf-8"));
        modelNode.put("model",editorJsonNode);
      }
 catch (      Exception e) {
        LOGGER.log(Level.SEVERE,"Error creating model JSON",e);
        setStatus(Status.SERVER_ERROR_INTERNAL);
      }
    }
  }
  return modelNode;
}
