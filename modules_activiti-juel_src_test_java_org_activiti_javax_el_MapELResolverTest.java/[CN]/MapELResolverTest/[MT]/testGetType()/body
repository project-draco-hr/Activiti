{
  Integer scalar=0;
  Map<Integer,Integer> map=sampleMap();
  MapELResolver resolver=new MapELResolver();
  context.setPropertyResolved(false);
  assertNull(resolver.getType(context,null,"foo"));
  assertFalse(context.isPropertyResolved());
  context.setPropertyResolved(false);
  assertNull(resolver.getType(context,scalar,"foo"));
  assertFalse(context.isPropertyResolved());
  context.setPropertyResolved(false);
  assertSame(Object.class,resolver.getType(context,map,1));
  assertTrue(context.isPropertyResolved());
  context.setPropertyResolved(false);
  assertSame(Object.class,resolver.getType(context,map,null));
  assertTrue(context.isPropertyResolved());
  context.setPropertyResolved(false);
  assertSame(Object.class,resolver.getType(context,map,"foo"));
  assertTrue(context.isPropertyResolved());
}
