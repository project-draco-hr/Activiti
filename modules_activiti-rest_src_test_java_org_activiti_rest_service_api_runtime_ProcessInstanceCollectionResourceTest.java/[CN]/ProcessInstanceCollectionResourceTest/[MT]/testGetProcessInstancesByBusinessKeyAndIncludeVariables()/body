{
  HashMap<String,Object> variables=new HashMap<String,Object>();
  variables.put("myVar1","myVar1");
  ProcessInstance processInstance=runtimeService.startProcessInstanceByKey("processOne","myBusinessKey",variables);
  String processId=processInstance.getId();
  String url=RestUrls.createRelativeResourceUrl(RestUrls.URL_PROCESS_INSTANCE_COLLECTION) + "?businessKey=myBusinessKey";
  ClientResource client=getAuthenticatedClient(url);
  Representation response=client.get();
  assertNotNull(response);
  assertNotNull(client.getResponse());
  assertEquals(Status.SUCCESS_OK,client.getResponse().getStatus());
  JsonNode rootNode=objectMapper.readTree(response.getStream());
  assertTrue(rootNode.size() > 0);
  assertEquals(1,rootNode.get("data").size());
  JsonNode dataNode=rootNode.get("data").get(0);
  assertEquals(processId,dataNode.get("id").textValue());
  JsonNode variableNodes=dataNode.get("variables");
  assertEquals(0,variableNodes.size());
  url=RestUrls.createRelativeResourceUrl(RestUrls.URL_PROCESS_INSTANCE_COLLECTION) + "?businessKey=myBusinessKey&includeProcessVariables=true";
  client=getAuthenticatedClient(url);
  response=client.get();
  assertNotNull(response);
  assertNotNull(client.getResponse());
  assertEquals(Status.SUCCESS_OK,client.getResponse().getStatus());
  rootNode=objectMapper.readTree(response.getStream());
  assertTrue(rootNode.size() > 0);
  assertEquals(1,rootNode.get("data").size());
  dataNode=rootNode.get("data").get(0);
  assertEquals(processId,dataNode.get("id").textValue());
  variableNodes=dataNode.get("variables");
  assertEquals(1,variableNodes.size());
  variableNodes=dataNode.get("variables");
  assertEquals(variableNodes.size(),1);
  assertNotNull(variableNodes.get(0).get("name"));
  assertNotNull(variableNodes.get(0).get("value"));
  assertEquals("myVar1",variableNodes.get(0).get("name").asText());
  assertEquals("myVar1",variableNodes.get(0).get("value").asText());
}
