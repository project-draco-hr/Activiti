{
  ProcessSolutionFolder folder=(ProcessSolutionFolder)getRepositoryNode(parentFolderId);
  if (folder.getVirtualRepositoryFolder() == null) {
    throw new RepositoryException("Cannot create artifact in the top-level folder. ");
  }
  if (folder.getWrappedNode() == null) {
    return repositoryService.createFolder(folder.getVirtualRepositoryFolder().getConnectorId(),folder.getVirtualRepositoryFolder().getReferencedNodeId(),name);
  }
  return repositoryService.createFolder(folder.getWrappedNode().getConnectorId(),folder.getWrappedNode().getNodeId(),name);
}
