{
  if (wrappedNode != null) {
    if (!wrappedNode.getMetadata().getParentFolderId().equals(virtualRepositoryFolder.getReferencedNodeId())) {
      return wrappedNode.getMetadata();
    }
  }
  return new RepositoryNodeMetadataImpl(){
    public String getName(){
      if (wrappedNode != null) {
        return wrappedNode.getMetadata().getName();
      }
      if (virtualRepositoryFolder != null) {
        return virtualRepositoryFolder.getLabel();
      }
      if (nodeId.endsWith(ProcessSolutionConnector.PS_HOME_NAME)) {
        return "Home";
      }
      return processSolution.getLabel();
    }
    public String getParentFolderId(){
      if (wrappedNode != null) {
        return processSolution.getId() + "/" + virtualRepositoryFolder.getId();
      }
      return "/";
    }
  }
;
}
