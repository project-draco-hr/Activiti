{
  Label header=new Label(ExplorerApplication.getCurrent().getMessage(Messages.FLOW_INSTANCE_HEADER_TASKS));
  header.addStyleName(ExplorerLayout.STYLE_PROCESS_INSTANCE_DETAILS_HEADER);
  addComponent(header);
  Table taskTable=new Table();
  taskTable.addStyleName(ExplorerLayout.STYLE_PROCESS_INSTANCE_TASK_LIST);
  taskTable.setWidth(100,UNITS_PERCENTAGE);
  taskTable.setHeight(100,UNITS_PERCENTAGE);
  List<HistoricTaskInstance> tasks=historyService.createHistoricTaskInstanceQuery().processInstanceId(processInstance.getId()).orderByHistoricTaskInstanceEndTime().desc().orderByHistoricActivityInstanceStartTime().desc().list();
  if (tasks.size() > 0) {
    taskTable.addContainerProperty("finished",Component.class,null,null,null,Table.ALIGN_CENTER);
    taskTable.setColumnWidth("finished",16);
    taskTable.addContainerProperty("name",String.class,null,ExplorerApplication.getCurrent().getMessage(Messages.TASK_NAME),null,Table.ALIGN_LEFT);
    taskTable.addContainerProperty("priority",Integer.class,null,ExplorerApplication.getCurrent().getMessage(Messages.TASK_PRIORITY),null,Table.ALIGN_LEFT);
    taskTable.addContainerProperty("assignee",Component.class,null,ExplorerApplication.getCurrent().getMessage(Messages.TASK_ASSIGNEE),null,Table.ALIGN_LEFT);
    taskTable.addContainerProperty("dueDate",Component.class,null,ExplorerApplication.getCurrent().getMessage(Messages.TASK_DUEDATE),null,Table.ALIGN_LEFT);
    taskTable.addContainerProperty("startDate",Component.class,null,ExplorerApplication.getCurrent().getMessage(Messages.TASK_CREATE_TIME),null,Table.ALIGN_LEFT);
    taskTable.addContainerProperty("endDate",Component.class,null,ExplorerApplication.getCurrent().getMessage(Messages.TASK_COMPLETE_TIME),null,Table.ALIGN_LEFT);
    addComponent(taskTable);
    ((VerticalLayout)getContent()).setExpandRatio(taskTable,1.0f);
    ((VerticalLayout)getContent()).setSizeFull();
    for (    HistoricTaskInstance task : tasks) {
      addTaskItem(task,taskTable);
    }
  }
 else {
    Label noTaskLabel=new Label(ExplorerApplication.getCurrent().getMessage(Messages.FLOW_INSTANCE_NO_TASKS));
    addComponent(noTaskLabel);
  }
}
