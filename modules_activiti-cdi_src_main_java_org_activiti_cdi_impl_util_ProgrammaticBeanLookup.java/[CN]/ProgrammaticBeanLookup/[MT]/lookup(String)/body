{
  BeanManager bm=BeanManagerLookup.getBeanManager();
  Iterator<Bean<?>> iter=bm.getBeans(name).iterator();
  if (!iter.hasNext()) {
    throw new IllegalStateException("CDI BeanManager cannot find an instance of requested type '" + name + "'");
  }
  Bean bean=iter.next();
  CreationalContext ctx=bm.createCreationalContext(bean);
  return bm.getReference(bean,bean.getBeanClass(),ctx);
}
