{
  ExecutionEntity execution=findExecutionById(processInstanceId);
  if (execution == null) {
    throw new ActivitiException("No process instance found for id '" + processInstanceId + "'");
  }
  CommandContext commandContext=Context.getCommandContext();
  commandContext.getTaskManager().deleteTasksByProcessInstanceId(processInstanceId,deleteReason,cascade);
  if (cascade) {
    commandContext.getHistoricProcessInstanceManager().deleteHistoricProcessInstanceById(processInstanceId);
  }
  execution.deleteCascade(deleteReason);
}
