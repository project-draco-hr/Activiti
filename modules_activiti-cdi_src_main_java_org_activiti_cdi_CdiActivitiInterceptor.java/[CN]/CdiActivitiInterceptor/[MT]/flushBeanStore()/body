{
  BusinessProcessAssociationManager associationManager=getAssociationManager();
  String executionId=associationManager.getExecutionId();
  if (executionId != null) {
    ExecutionEntity execution=Context.getCommandContext().getExecutionManager().findExecutionById(executionId);
    if (execution != null && !execution.isEnded()) {
      CachingBeanStore beanStore=associationManager.getBeanStore();
      if (log.isLoggable(Level.FINE)) {
        logFlushSummary(beanStore);
      }
      execution.setVariables(beanStore.getAll());
      beanStore.clear();
    }
  }
}
