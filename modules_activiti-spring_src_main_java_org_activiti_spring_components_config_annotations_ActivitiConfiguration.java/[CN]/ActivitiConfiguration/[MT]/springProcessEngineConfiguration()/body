{
  ActivitiConfigurer configurer=activitiConfigurer(activitiConfigurers);
  List<Resource> processDefinitionResources=new ArrayList<Resource>();
  configurer.processDefinitionResources(processDefinitionResources);
  SpringProcessEngineConfiguration engine=new SpringProcessEngineConfiguration();
  if (!processDefinitionResources.isEmpty()) {
    engine.setDeploymentResources(processDefinitionResources.toArray(new Resource[processDefinitionResources.size()]));
  }
  DataSource dataSource=dataSource(configurer,dataSources);
  engine.setDataSource(dataSource);
  engine.setTransactionManager(platformTransactionManager(dataSource));
  engine.setJobExecutor(springJobExecutor());
  engine.setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);
  configurer.postProcessSpringProcessEngineConfiguration(engine);
  return engine;
}
