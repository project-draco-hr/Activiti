{
  if (embeddedProcessInstance != null) {
    StringBuilder strb=new StringBuilder();
    if (!embeddedProcessInstance.hasExecutions()) {
      if (embeddedProcessInstance.getActivity() != null) {
        strb.append("activity:" + embeddedProcessInstance.getActivity().getId());
      }
    }
 else {
      throw new ActivitiException("Didn't yet implement serialization of non-root executions");
    }
    setEmbeddedState(strb.toString());
  }
}
