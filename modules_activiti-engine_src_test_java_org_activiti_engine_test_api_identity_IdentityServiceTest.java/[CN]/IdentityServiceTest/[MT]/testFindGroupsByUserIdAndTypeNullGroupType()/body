{
  User johndoe=identityService.newUser("johndoe");
  identityService.saveUser(johndoe);
  Group sales=identityService.newGroup("sales");
  sales.setType("type1");
  identityService.saveGroup(sales);
  Group admin=identityService.newGroup("admin");
  admin.setType("type2");
  identityService.saveGroup(admin);
  identityService.createMembership(johndoe.getId(),sales.getId());
  identityService.createMembership(johndoe.getId(),admin.getId());
  List<Group> groups=identityService.findGroupsByUserIdAndGroupType(johndoe.getId(),null);
  Assert.assertNotNull(groups);
  Assert.assertEquals(2,groups.size());
  identityService.deleteUser(johndoe.getId());
  identityService.deleteGroup(sales.getId());
  identityService.deleteGroup(admin.getId());
}
