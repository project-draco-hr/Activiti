{
  PersistenceSession persistenceSession=commandContext.getPersistenceSession();
  String lockOwner=jobExecutor.getLockOwner();
  int lockTimeInMillis=jobExecutor.getLockTimeInMillis();
  int maxJobsPerAcquisition=jobExecutor.getMaxJobsPerAcquisition();
  AcquiredJobs acquiredJobs=new AcquiredJobs();
  List<JobImpl> jobs=persistenceSession.findNextJobsToExecute(maxJobsPerAcquisition);
  for (  JobImpl job : jobs) {
    List<String> jobIds=new ArrayList<String>();
    if (job != null) {
      job.setLockOwner(lockOwner);
      GregorianCalendar gregorianCalendar=new GregorianCalendar();
      gregorianCalendar.setTime(Clock.getCurrentTime());
      gregorianCalendar.add(Calendar.MILLISECOND,lockTimeInMillis);
      job.setLockExpirationTime(gregorianCalendar.getTime());
      jobIds.add(job.getId());
      if (job.isExclusive()) {
      }
    }
    acquiredJobs.addJobIds(jobIds);
  }
  return acquiredJobs;
}
