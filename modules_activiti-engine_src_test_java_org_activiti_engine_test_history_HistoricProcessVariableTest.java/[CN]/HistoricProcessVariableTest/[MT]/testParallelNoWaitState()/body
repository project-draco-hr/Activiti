{
  ProcessInstance processInstance=runtimeService.startProcessInstanceByKey("myProc");
  assertProcessEnded(processInstance.getId());
  List<HistoricProcessVariable> variables=historyService.createHistoricProcessVariableQuery().list();
  assertEquals(1,variables.size());
  HistoricProcessVariableEntity historicVariable=(HistoricProcessVariableEntity)variables.get(0);
  assertEquals("test456",historicVariable.getTextValue());
  assertEquals(7,historyService.createHistoricActivityInstanceQuery().count());
  assertEquals(2,historyService.createHistoricDetailQuery().count());
}
