{
  ActivityImpl activity=execution.getActivity();
  if (activity != null) {
    return activity;
  }
 else {
    ExecutionImpl parent=execution.getParent();
    if (parent != null) {
      return getScope(execution.getParent());
    }
    return execution.getProcessDefinition();
  }
}
