{
  if (hasMultiInstanceCharacteristics()) {
    if (multiInstanceActivityBehavior instanceof SequentialMultiInstanceBehavior) {
      return new SequentialMultiInstanceBehavior((ActivityImpl)execution.getActivity(),(AbstractBpmnActivityBehavior)delegateInstance);
    }
 else {
      return new ParallelMultiInstanceBehavior((ActivityImpl)execution.getActivity(),(AbstractBpmnActivityBehavior)delegateInstance);
    }
  }
  return delegateInstance;
}
