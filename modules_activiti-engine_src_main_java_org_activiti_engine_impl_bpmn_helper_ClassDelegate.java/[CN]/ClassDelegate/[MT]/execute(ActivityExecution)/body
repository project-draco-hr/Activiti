{
  if (activityBehaviorInstance == null) {
    activityBehaviorInstance=getActivityBehaviorInstance(execution);
  }
  try {
    activityBehaviorInstance.execute(execution);
  }
 catch (  BpmnError error) {
    PvmActivity errorEventHandler=null;
    for (    PvmActivity activity : execution.getActivity().getActivities()) {
      if (((ActivityImpl)activity).getActivityBehavior() instanceof BoundaryEventActivityBehavior) {
        errorEventHandler=activity;
        break;
      }
    }
    if (errorEventHandler != null) {
      ErrorEndEventActivityBehavior errorEndEvent=new ErrorEndEventActivityBehavior(error.getErrorCode());
      errorEndEvent.setBorderEventActivityId(errorEventHandler.getId());
      errorEndEvent.execute(execution);
    }
 else {
      throw error;
    }
  }
}
