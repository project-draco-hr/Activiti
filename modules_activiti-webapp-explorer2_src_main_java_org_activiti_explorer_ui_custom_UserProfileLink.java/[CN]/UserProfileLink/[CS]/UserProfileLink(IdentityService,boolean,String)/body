{
  this.renderPicture=renderPicture;
  this.identityService=identityService;
  this.viewManager=ExplorerApp.get().getViewManager();
  addStyleName(ExplorerLayout.STYLE_PROFILE_LINK);
  Button owner=new Button(userName);
  ClickListener buttonClickListener=new ClickListener(){
    private static final long serialVersionUID=1L;
    public void buttonClick(    ClickEvent event){
      viewManager.showProfilePopup(userName);
    }
  }
;
  owner.addStyleName(Reindeer.BUTTON_LINK);
  owner.addListener(buttonClickListener);
  if (renderPicture) {
    Picture picture=identityService.getUserPicture(userName);
    if (picture != null) {
      Resource imageResource=new StreamResource(new InputStreamStreamSource(picture.getInputStream()),userName + picture.getMimeType(),ExplorerApp.get());
      Embedded image=new Embedded(null,imageResource);
      image.setType(Embedded.TYPE_IMAGE);
      image.setHeight(30,Embedded.UNITS_PIXELS);
      image.setWidth(30,Embedded.UNITS_PIXELS);
      image.addListener(new MouseEvents.ClickListener(){
        private static final long serialVersionUID=7341560240277898495L;
        public void click(        com.vaadin.event.MouseEvents.ClickEvent event){
          viewManager.showProfilePopup(userName);
        }
      }
);
      addComponent(image);
      setComponentAlignment(image,Alignment.MIDDLE_LEFT);
    }
 else {
    }
  }
  addComponent(owner);
  setComponentAlignment(owner,Alignment.MIDDLE_LEFT);
  setSizeUndefined();
  setSpacing(true);
}
