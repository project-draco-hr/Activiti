{
  dbSqlSession.insert(deployment);
  for (  ResourceEntity resource : deployment.getResources().values()) {
    resource.setDeploymentId(deployment.getId());
    dbSqlSession.insert(resource);
  }
  for (  Deployer deployer : dbRepositorySessionFactory.getDeployers()) {
    List<ProcessDefinitionEntity> processDefinitions=deployer.deploy(deployment);
    for (    ProcessDefinitionEntity processDefinition : processDefinitions) {
      processDefinition.setDeploymentId(deployment.getId());
      dbSqlSession.insert(processDefinition);
      addToProcessDefinitionCache(processDefinition);
    }
  }
}
