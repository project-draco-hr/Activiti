{
  if (log.isLoggable(Level.FINE)) {
    log.fine("Leaving activity '" + execution.getActivity().getId() + "'");
  }
  List<Transition> outgoingSequenceFlow=execution.getOutgoingTransitions();
  if (outgoingSequenceFlow.size() == 1) {
    execution.take(outgoingSequenceFlow.get(0));
  }
 else   if (outgoingSequenceFlow.size() > 1) {
    execution.getExecutionController().setActive(false);
    ExecutionController concurrencyController=execution.getExecutionController();
    for (    Transition outSeqFlow : outgoingSequenceFlow) {
      if (outSeqFlow.getCondition() == null || !checkConditions || outSeqFlow.getCondition().evaluate(execution)) {
        ActivityExecution concurrentExecution=concurrencyController.createExecution();
        concurrentExecution.take(outSeqFlow);
      }
    }
  }
 else {
    if (log.isLoggable(Level.FINE)) {
      log.fine("No outgoing sequence flow found for " + execution.getActivity().getId() + ". Ending execution.");
    }
    execution.getExecutionController().end();
  }
}
