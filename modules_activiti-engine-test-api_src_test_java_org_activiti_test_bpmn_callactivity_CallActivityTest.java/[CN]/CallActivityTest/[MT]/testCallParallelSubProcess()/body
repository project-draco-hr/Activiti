{
  ProcessInstance processInstance=deployer.getProcessService().startProcessInstanceByKey("callParallelSubProcess");
  TaskQuery taskQuery=deployer.getTaskService().createTaskQuery().orderAsc(TaskQuery.PROPERTY_NAME);
  List<Task> tasks=taskQuery.list();
  assertEquals(2,tasks.size());
  Task taskA=tasks.get(0);
  Task taskB=tasks.get(1);
  assertEquals("Task A",taskA.getName());
  assertEquals("Task B",taskB.getName());
  deployer.getTaskService().complete(taskA.getId());
  assertEquals(1,taskQuery.list().size());
  assertEquals(2,deployer.getProcessService().createProcessInstanceQuery().list().size());
  deployer.getTaskService().complete(taskB.getId());
  assertEquals(0,deployer.getProcessService().createProcessInstanceQuery().list().size());
}
