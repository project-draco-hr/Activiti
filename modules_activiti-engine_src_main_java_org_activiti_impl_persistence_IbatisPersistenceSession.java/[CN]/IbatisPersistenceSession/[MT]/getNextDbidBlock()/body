{
  PropertyImpl property=(PropertyImpl)sqlSession.selectOne(statement("selectProperty"),"next.dbid");
  long oldValue=Long.parseLong(property.getValue());
  long newValue=oldValue + blockSize;
  Map<String,Object> updateValues=new HashMap<String,Object>();
  updateValues.put("name",property.getName());
  updateValues.put("revision",property.getDbversion());
  updateValues.put("newRevision",property.getDbversion() + 1);
  updateValues.put("value",Long.toString(newValue));
  int rowsUpdated=sqlSession.update(statement("updateProperty"),updateValues);
  if (rowsUpdated != 1) {
    throw new ActivitiOptimisticLockingException("couldn't get next block of dbids");
  }
  return new DbidBlock(oldValue,newValue - 1);
}
