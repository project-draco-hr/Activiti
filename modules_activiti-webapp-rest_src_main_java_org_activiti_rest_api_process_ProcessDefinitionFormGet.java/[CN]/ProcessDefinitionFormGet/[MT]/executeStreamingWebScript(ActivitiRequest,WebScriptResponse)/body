{
  String processDefinitionId=req.getMandatoryPathParameter("processDefinitionId");
  Object form=getTaskService().getRenderedStartFormById(processDefinitionId);
  InputStream is=null;
  if (form != null && form instanceof String) {
    is=new ByteArrayInputStream(((String)form).getBytes());
  }
 else   if (form != null && form instanceof InputStream) {
    is=(InputStream)form;
  }
  if (is != null) {
    String mimeType=getMimeType(is);
    try {
      streamResponse(res,is,new Date(0),null,true,processDefinitionId,mimeType);
    }
 catch (    IOException e) {
      throw new WebScriptException(Status.STATUS_INTERNAL_SERVER_ERROR,"The form for process definition '" + processDefinitionId + "' failed to render.");
    }
  }
 else   if (form != null) {
    throw new WebScriptException(Status.STATUS_INTERNAL_SERVER_ERROR,"The form for process definition '" + processDefinitionId + "' cannot be rendered using the rest api.");
  }
 else {
    throw new WebScriptException(Status.STATUS_NOT_FOUND,"There is no form for process definition '" + processDefinitionId + "'.");
  }
}
