{
  if (getHistoryManager().isHistoryEnabled()) {
    HistoricTaskInstanceEntity historicTaskInstance=findHistoricTaskInstanceById(taskId);
    if (historicTaskInstance != null) {
      CommandContext commandContext=Context.getCommandContext();
      commandContext.getHistoricDetailManager().deleteHistoricDetailsByTaskId(taskId);
      commandContext.getHistoricVariableInstanceManager().deleteHistoricVariableInstancesByTaskId(taskId);
      commandContext.getCommentManager().deleteCommentsByTaskId(taskId);
      commandContext.getAttachmentManager().deleteAttachmentsByTaskId(taskId);
      getDbSqlSession().delete(historicTaskInstance);
    }
  }
}
