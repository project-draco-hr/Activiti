{
  if (historyLevel > ProcessEngineConfigurationImpl.HISTORYLEVEL_NONE) {
    HistoricTaskInstanceEntity historicTaskInstance=findHistoricTaskInstanceById(taskId);
    if (historicTaskInstance != null) {
      CommandContext commandContext=Context.getCommandContext();
      commandContext.getHistoricDetailManager().deleteHistoricDetailsByTaskId(taskId);
      commandContext.getCommentManager().deleteCommentsByTaskId(taskId);
      commandContext.getAttachmentManager().deleteAttachmentsByTaskId(taskId);
      getDbSqlSession().delete(HistoricTaskInstanceEntity.class,taskId);
    }
  }
}
