{
  byte[] bytes=getUtf8Bytes(exception);
  if (bytes == null) {
    if (exceptionByteArrayId != null) {
      Context.getCommandContext().getByteArrayEntityManager().deleteByteArrayById(exceptionByteArrayId);
      exceptionByteArrayId=null;
    }
  }
 else {
    if (exceptionByteArrayId == null) {
      exceptionByteArray=ByteArrayEntity.createAndInsert("job.exceptionByteArray",bytes);
      exceptionByteArrayId=exceptionByteArray.getId();
    }
 else {
      ByteArrayEntity byteArrayEntity=getExceptionByteArrayEntity();
      byteArrayEntity.setBytes(bytes);
    }
  }
}
