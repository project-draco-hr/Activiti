{
  if (SuspensionState.ACTIVE.equals(getProcessDefinitionSuspensionState())) {
    return new ProcessInstanceQueryImpl(commandContext).processDefinitionId(processDefinition.getId()).suspended().listPage(currentPageStartIndex,Context.getProcessEngineConfiguration().getBatchSizeProcessInstances());
  }
 else {
    return new ProcessInstanceQueryImpl(commandContext).processDefinitionId(processDefinition.getId()).active().listPage(currentPageStartIndex,Context.getProcessEngineConfiguration().getBatchSizeProcessInstances());
  }
}
