{
  ActivityImpl currentActivity=(ActivityImpl)execution.getActivity();
  ActivityImpl parentActivity=(ActivityImpl)currentActivity.getParentActivity();
  if (parentActivity != null && parentActivity.getActivityBehavior() instanceof SubProcessActivity) {
    execution.setActivity(parentActivity);
    leave(execution);
  }
 else {
    execution.end();
  }
}
