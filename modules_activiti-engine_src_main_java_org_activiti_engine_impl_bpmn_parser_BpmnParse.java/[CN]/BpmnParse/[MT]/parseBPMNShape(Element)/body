{
  String bpmnElement=bpmnShapeElement.attribute("bpmnElement");
  if (bpmnElement != null && !"".equals(bpmnElement)) {
    if (participantProcesses.get(bpmnElement) != null) {
      getProcessDefinition(participantProcesses.get(bpmnElement)).setGraphicalNotationDefined(true);
    }
    for (    ProcessDefinitionEntity processDefinition : getProcessDefinitions()) {
      ActivityImpl activity=processDefinition.findActivity(bpmnElement);
      if (activity != null) {
        Element bounds=bpmnShapeElement.elementNS(BpmnParser.BPMN_DC_NS,"Bounds");
        if (bounds != null) {
          activity.setX(parseDoubleAttribute(bpmnShapeElement,"x",bounds.attribute("x"),true).intValue());
          activity.setY(parseDoubleAttribute(bpmnShapeElement,"y",bounds.attribute("y"),true).intValue());
          activity.setWidth(parseDoubleAttribute(bpmnShapeElement,"width",bounds.attribute("width"),true).intValue());
          activity.setHeight(parseDoubleAttribute(bpmnShapeElement,"height",bounds.attribute("height"),true).intValue());
        }
 else {
          addError("'Bounds' element is required",bpmnShapeElement);
        }
        String isExpanded=bpmnShapeElement.attribute("isExpanded");
        if (isExpanded != null) {
          activity.setProperty(PROPERTYNAME_ISEXPANDED,parseBooleanAttribute(isExpanded));
        }
      }
 else       if (!elementIds.contains(bpmnElement)) {
        addError("Invalid reference in 'bpmnElement' attribute, activity " + bpmnElement + "not found",bpmnShapeElement);
      }
    }
  }
 else {
    addError("'bpmnElement' attribute is required on BPMNShape",bpmnShapeElement);
  }
}
