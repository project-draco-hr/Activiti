{
  List<EventDefinition> eventDefinitions=(List<EventDefinition>)scope.getProperty(PROPERTYNAME_EVENT_DEFINITIONS);
  if (eventDefinitions == null) {
    eventDefinitions=new ArrayList<EventDefinition>();
    scope.setProperty(PROPERTYNAME_EVENT_DEFINITIONS,eventDefinitions);
  }
 else {
    if (subscription.getEventType().equals("message")) {
      for (      EventDefinition eventDefinition : eventDefinitions) {
        if (eventDefinition.getEventType().equals("message") && eventDefinition.getEventName().equals(subscription.getEventName()) && eventDefinition.isStartEvent() == subscription.isStartEvent()) {
          addError("Cannot have more than one message event subscription with name '" + subscription.getEventName() + "' for scope '"+ scope.getId()+ "'",element);
        }
      }
    }
  }
  eventDefinitions.add(subscription);
}
