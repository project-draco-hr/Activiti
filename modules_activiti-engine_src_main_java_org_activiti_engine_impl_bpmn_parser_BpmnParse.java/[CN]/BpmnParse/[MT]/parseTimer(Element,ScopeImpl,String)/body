{
  TimerDeclarationType type=TimerDeclarationType.DATE;
  Expression expression=parseExpression(timerEventDefinition,"timeDate");
  if (expression == null) {
    type=TimerDeclarationType.CYCLE;
    expression=parseExpression(timerEventDefinition,"timeCycle");
  }
  if (expression == null) {
    type=TimerDeclarationType.DURATION;
    expression=parseExpression(timerEventDefinition,"timeDuration");
  }
  if (expression == null) {
    addError("Timer needs configuration (either timeDate, timeCycle or timeDuration is needed).",timerEventDefinition);
  }
  TimerDeclarationImpl timerDeclaration=new TimerDeclarationImpl(expression,type,jobHandlerType);
  timerDeclaration.setJobHandlerConfiguration(timerActivity.getId());
  timerDeclaration.setExclusive("true".equals(timerEventDefinition.attributeNS(BpmnParser.ACTIVITI_BPMN_EXTENSIONS_NS,"exclusive",String.valueOf(JobEntity.DEFAULT_EXCLUSIVE))));
  return timerDeclaration;
}
