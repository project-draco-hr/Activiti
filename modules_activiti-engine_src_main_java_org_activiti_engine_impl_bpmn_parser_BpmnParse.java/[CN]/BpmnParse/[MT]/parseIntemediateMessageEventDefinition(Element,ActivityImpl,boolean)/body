{
  nestedActivity.setProperty("type","intermediateMessageCatch");
  EventSubscriptionDeclaration messageDefinition=parseMessageEventDefinition(messageEventDefinition);
  if (isAfterEventBasedGateway) {
    messageDefinition.setActivityId(nestedActivity.getId());
    addEventSubscriptionDeclaration(messageDefinition,nestedActivity.getParent(),messageEventDefinition);
  }
 else {
    nestedActivity.setScope(true);
    addEventSubscriptionDeclaration(messageDefinition,nestedActivity,messageEventDefinition);
  }
  for (  BpmnParseListener parseListener : parseListeners) {
    parseListener.parseIntermediateMessageCatchEventDefinition(messageEventDefinition,nestedActivity);
  }
}
