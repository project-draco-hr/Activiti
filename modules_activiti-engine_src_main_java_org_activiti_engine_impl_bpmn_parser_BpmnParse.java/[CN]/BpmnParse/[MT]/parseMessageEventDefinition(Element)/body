{
  String messageRef=messageEventDefinition.attribute("messageRef");
  if (messageRef == null) {
    addError("attribute 'messageRef' is required",messageEventDefinition);
  }
  MessageDefinition messageDefinition=messages.get(resolveName(messageRef));
  if (messageDefinition == null) {
    addError("Invalid 'messageRef': no message with id '" + messageRef + "' found.",messageEventDefinition);
  }
  return new EventSubscriptionDeclaration(messageDefinition.getName(),"message");
}
