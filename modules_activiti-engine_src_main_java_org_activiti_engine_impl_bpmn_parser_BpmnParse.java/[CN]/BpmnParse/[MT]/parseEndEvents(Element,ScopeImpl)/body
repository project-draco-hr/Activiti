{
  for (  Element endEventElement : parentElement.elements("endEvent")) {
    ActivityImpl activity=parseAndCreateActivityOnScopeElement(endEventElement,scope);
    Element errorEventDefinition=endEventElement.element("errorEventDefinition");
    if (errorEventDefinition != null) {
      String errorRef=errorEventDefinition.attribute("errorRef");
      if (errorRef == null || "".equals(errorRef)) {
        addError("'errorRef' attribute is mandatory on error end event",errorEventDefinition);
      }
 else {
        Error error=errors.get(errorRef);
        activity.setProperty("type","errorEndEvent");
        activity.setActivityBehavior(new ErrorEndEventActivityBehavior(error != null ? error.getErrorCode() : errorRef));
      }
    }
 else {
      activity.setActivityBehavior(new NoneEndEventActivityBehavior());
    }
    for (    BpmnParseListener parseListener : parseListeners) {
      parseListener.parseEndEvent(endEventElement,scope,activity);
    }
  }
}
