{
  if (activity.getOutgoingTransitions().size() == 0) {
    bpmnModel.addProblem("Exclusive Gateway '" + activity.getId() + "' has no outgoing sequence flows.",exclusiveGateway);
  }
 else   if (activity.getOutgoingTransitions().size() == 1) {
    PvmTransition flow=activity.getOutgoingTransitions().get(0);
    Condition condition=(Condition)flow.getProperty(BpmnParse.PROPERTYNAME_CONDITION);
    if (condition != null) {
      bpmnModel.addWarning("Exclusive Gateway '" + activity.getId() + "' has only one outgoing sequence flow ('"+ flow.getId()+ "'). This is not allowed to have a condition.",exclusiveGateway);
    }
  }
 else {
    String defaultSequenceFlow=(String)activity.getProperty("default");
    boolean hasDefaultFlow=StringUtils.isNotEmpty(defaultSequenceFlow);
    ArrayList<PvmTransition> flowsWithoutCondition=new ArrayList<PvmTransition>();
    for (    PvmTransition flow : activity.getOutgoingTransitions()) {
      Condition condition=(Condition)flow.getProperty(BpmnParse.PROPERTYNAME_CONDITION);
      boolean isDefaultFlow=flow.getId() != null && flow.getId().equals(defaultSequenceFlow);
      boolean hasConditon=condition != null;
      if (!hasConditon && !isDefaultFlow) {
        flowsWithoutCondition.add(flow);
      }
      if (hasConditon && isDefaultFlow) {
        bpmnModel.addWarning("Exclusive Gateway '" + activity.getId() + "' has outgoing sequence flow '"+ flow.getId()+ "' which is the default flow but has a condition too.",exclusiveGateway);
      }
    }
    if (hasDefaultFlow || flowsWithoutCondition.size() > 1) {
      for (      PvmTransition flow : flowsWithoutCondition) {
        bpmnModel.addWarning("Exclusive Gateway '" + activity.getId() + "' has outgoing sequence flow '"+ flow.getId()+ "' without condition which is not the default flow.",exclusiveGateway);
      }
    }
 else     if (flowsWithoutCondition.size() == 1) {
      PvmTransition flow=flowsWithoutCondition.get(0);
      bpmnModel.addWarning("Exclusive Gateway '" + activity.getId() + "' has outgoing sequence flow '"+ flow.getId()+ "' without condition which is not the default flow. We assume it to be the default flow, but it is bad modeling practice, better set the default flow in your gateway.",exclusiveGateway);
    }
  }
}
