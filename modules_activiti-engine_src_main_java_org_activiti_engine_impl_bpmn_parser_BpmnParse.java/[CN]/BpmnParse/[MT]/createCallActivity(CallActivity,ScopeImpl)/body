{
  ActivityImpl activity=createActivityOnScope(callActivity,ELEMENT_CALL_ACTIVITY,scope);
  String expressionRegex="\\$+\\{+.+\\}";
  CallActivityBehavior callActivityBehaviour=null;
  if (StringUtils.isNotEmpty(callActivity.getCalledElement()) && callActivity.getCalledElement().matches(expressionRegex)) {
    callActivityBehaviour=new CallActivityBehavior(expressionManager.createExpression(callActivity.getCalledElement()));
  }
 else {
    callActivityBehaviour=new CallActivityBehavior(callActivity.getCalledElement());
  }
  for (  IOParameter ioParameter : callActivity.getInParameters()) {
    if (StringUtils.isNotEmpty(ioParameter.getSourceExpression())) {
      Expression expression=expressionManager.createExpression(ioParameter.getSourceExpression().trim());
      callActivityBehaviour.addDataInputAssociation(new SimpleDataInputAssociation(expression,ioParameter.getTarget()));
    }
 else {
      callActivityBehaviour.addDataInputAssociation(new SimpleDataInputAssociation(ioParameter.getSource(),ioParameter.getTarget()));
    }
  }
  for (  IOParameter ioParameter : callActivity.getOutParameters()) {
    if (StringUtils.isNotEmpty(ioParameter.getSourceExpression())) {
      Expression expression=expressionManager.createExpression(ioParameter.getSourceExpression().trim());
      callActivityBehaviour.addDataOutputAssociation(new MessageImplicitDataOutputAssociation(ioParameter.getTarget(),expression));
    }
 else {
      callActivityBehaviour.addDataOutputAssociation(new MessageImplicitDataOutputAssociation(ioParameter.getTarget(),ioParameter.getSource()));
    }
  }
  activity.setScope(true);
  activity.setActivityBehavior(callActivityBehaviour);
  createExecutionListenersOnScope(callActivity.getExecutionListeners(),activity);
  for (  BpmnParseListener parseListener : parseListeners) {
    parseListener.parseCallActivity(callActivity,scope,activity);
  }
  return activity;
}
