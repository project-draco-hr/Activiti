{
  nestedErrorEventActivity.setProperty("type","boundaryError");
  ScopeImpl catchingScope=nestedErrorEventActivity.getParent();
  ((ActivityImpl)catchingScope).setScope(true);
  String errorRef=errorEventDefinition.attribute("errorRef");
  Error error=null;
  ErrorEventDefinition definition=new ErrorEventDefinition(nestedErrorEventActivity.getId());
  if (errorRef != null) {
    error=errors.get(errorRef);
    definition.setErrorCode(error == null ? errorRef : error.getErrorCode());
  }
  addErrorEventDefinition(definition,catchingScope);
  for (  BpmnParseListener parseListener : parseListeners) {
    parseListener.parseBoundaryErrorEventDefinition(errorEventDefinition,interrupting,activity,nestedErrorEventActivity);
  }
}
