{
  ScopeInstanceImpl innerScope=((ExecutionContextImpl)activityContext).getScopeInstance();
  ScopeInstanceImpl outerScope=innerScope.getParent();
  if (destinationVariableName != null) {
    if (innerScope.hasVariable(sourceVariableName)) {
      Object value=innerScope.getVariable(sourceVariableName);
      outerScope.setVariable(destinationVariableName,value);
    }
 else {
      throw new ActivitiException("Couldn't destroy variable " + sourceVariableName + ", since it does not exist");
    }
  }
  if (destinationValueExpression != null) {
    Object value=destinationValueExpression.getValue(innerScope);
    outerScope.setVariable(destinationVariableName,value);
  }
  if (link != null) {
    if (innerScope.hasVariable(sourceVariableName)) {
      Object value=innerScope.getVariable(sourceVariableName);
      outerScope.setVariable(destinationVariableName,value);
    }
 else {
      throw new ActivitiException("Couldn't destroy variable " + sourceVariableName + ", since it does not exist");
    }
  }
  if (linkValueExpression != null) {
    Object value=sourceValueExpression.getValue(innerScope);
    outerScope.setVariable(destinationVariableName,value);
  }
}
