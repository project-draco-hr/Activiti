{
  KickstartWorkflowDto dto=new KickstartWorkflowDto();
  dto.setName("One Mail Task Workflow");
  dto.setDescription("Simple workflow definition containing one mail task");
  MailTaskDto task=new MailTaskDto();
  task.setId("myId");
  task.setName("My First Mail task");
  task.setDescription("Desc first Mail task");
  task.getTo().setStringValue("you@yourcompany.com");
  task.getTo().setExpression("${to_email}");
  task.getFrom().setStringValue("me@mycompany.com");
  task.getFrom().setExpression("${from_email}");
  task.getSubject().setStringValue("my subject string");
  task.getSubject().setExpression("${my.subject.expression}");
  task.getCc().setStringValue("my cc string");
  task.getCc().setExpression("${my.cc.expression}");
  task.getBcc().setStringValue("my bcc string");
  task.getBcc().setExpression("${my.bcc.expression}");
  task.getHtml().setStringValue("my html string");
  task.getHtml().setExpression("${my.html.expression}");
  task.getText().setStringValue("my text string");
  task.getText().setExpression("${my.text.expression}");
  dto.addTask(task);
  String bpmn=new KickstartServiceImpl(processEngine).createBpmn20Xml(dto);
  assertTrue(bpmn.indexOf("serviceTask ") > -1);
  assertTrue(bpmn.indexOf(":type=\"mail\"") > -1);
  assertTrue(bpmn.indexOf("name=\"to\"") > -1);
  assertTrue(containsStringValue(bpmn,"you@yourcompany.com"));
  assertTrue(containsExpression(bpmn,"${to_email}"));
  assertTrue(bpmn.indexOf("name=\"from\"") > -1);
  assertTrue(containsStringValue(bpmn,"me@mycompany.com"));
  assertTrue(containsExpression(bpmn,"${from_email}"));
  assertTrue(bpmn.indexOf("name=\"subject\"") > -1);
  assertTrue(containsStringValue(bpmn,"my subject string"));
  assertTrue(containsExpression(bpmn,"${my.subject.expression}"));
  assertTrue(bpmn.indexOf("name=\"cc\"") > -1);
  assertTrue(containsStringValue(bpmn,"my cc string"));
  assertTrue(containsExpression(bpmn,"${my.cc.expression}"));
  assertTrue(bpmn.indexOf("name=\"bcc\"") > -1);
  assertTrue(containsStringValue(bpmn,"my bcc string"));
  assertTrue(containsExpression(bpmn,"${my.bcc.expression}"));
  assertTrue(bpmn.indexOf("name=\"html\"") > -1);
  assertTrue(containsStringValue(bpmn,"my html string"));
  assertTrue(containsExpression(bpmn,"${my.html.expression}"));
  assertTrue(bpmn.indexOf("name=\"text\"") > -1);
  assertTrue(containsStringValue(bpmn,"my text string"));
  assertTrue(containsExpression(bpmn,"${my.text.expression}"));
}
