{
  KickstartWorkflowDto dto=new KickstartWorkflowDto();
  dto.setName("One Mail Task Workflow");
  dto.setDescription("Simple workflow definition containing one mail task");
  MailTaskDto taskDto=new MailTaskDto();
  taskDto.setName("My Email Task");
  taskDto.setDescription("my email task description");
  taskDto.getTo().setStringValue("you@yourcompany.com");
  taskDto.getTo().setExpression("${to_email}");
  taskDto.getFrom().setStringValue("me@mycompany.com");
  taskDto.getFrom().setExpression("${from_email}");
  taskDto.getSubject().setStringValue("my subject string");
  taskDto.getSubject().setExpression("${my.subject.expression}");
  taskDto.getCc().setStringValue("my cc string");
  taskDto.getCc().setExpression("${my.cc.expression}");
  taskDto.getBcc().setStringValue("my bcc string");
  taskDto.getBcc().setExpression("${my.bcc.expression}");
  taskDto.getHtml().setStringValue("my html string");
  taskDto.getHtml().setExpression("${my.html.expression}");
  taskDto.getText().setStringValue("my text string");
  taskDto.getText().setExpression("${my.text.expression}");
  dto.addTask(taskDto);
  KickstartServiceImpl service=new KickstartServiceImpl(processEngine);
  String deploymentId=service.deployKickstartWorkflow(dto);
  String pid=getDeployedProcessDefinitionId(deploymentId);
  KickstartWorkflowDto deployedDto=service.findKickstartWorkflowById(pid);
  assertEquals(dto.getName(),deployedDto.getName());
  assertEquals(dto.getDescription(),deployedDto.getDescription());
  assertTrue("Task should be a MailTaskDto",deployedDto.getTasks().get(0) instanceof MailTaskDto);
  MailTaskDto task=(MailTaskDto)deployedDto.getTasks().get(0);
  assertEquals("task_1",task.getId());
  assertEquals("you@yourcompany.com",task.getTo().getStringValue());
  assertEquals("${to_email}",task.getTo().getExpression());
  assertEquals("me@mycompany.com",task.getFrom().getStringValue());
  assertEquals("${from_email}",task.getFrom().getExpression());
  assertEquals("my subject string",task.getSubject().getStringValue());
  assertEquals("${my.subject.expression}",task.getSubject().getExpression());
  assertEquals("my cc string",task.getCc().getStringValue());
  assertEquals("${my.cc.expression}",task.getCc().getExpression());
  assertEquals("my bcc string",task.getBcc().getStringValue());
  assertEquals("${my.bcc.expression}",task.getBcc().getExpression());
  assertEquals("my html string",task.getHtml().getStringValue());
  assertEquals("${my.html.expression}",task.getHtml().getExpression());
  assertEquals("my text string",task.getText().getStringValue());
  assertEquals("${my.text.expression}",task.getText().getExpression());
}
