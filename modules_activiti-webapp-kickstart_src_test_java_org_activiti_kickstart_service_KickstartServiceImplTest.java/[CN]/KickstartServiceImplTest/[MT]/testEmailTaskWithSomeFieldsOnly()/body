{
  KickstartWorkflowDto dto=new KickstartWorkflowDto();
  dto.setName("One Mail Task Workflow");
  dto.setDescription("Simple workflow definition containing one mail task");
  MailTaskDto task=new MailTaskDto();
  task.setId("myId");
  task.setName("My First Mail task");
  task.setDescription("Desc first Mail task");
  task.getTo().setStringValue("you@yourcompany.com");
  task.getSubject().setStringValue("my subject string");
  task.getHtml().setExpression("${my.html.expression}");
  task.getText().setStringValue("my text string");
  dto.addTask(task);
  String bpmn=new KickstartServiceImpl(processEngine).createBpmn20Xml(dto);
  assertTrue(bpmn.indexOf("serviceTask ") > -1);
  assertTrue(bpmn.indexOf(":type=\"mail\"") > -1);
  assertTrue(bpmn.indexOf("name=\"to\"") > -1);
  assertTrue(containsStringValue(bpmn,"you@yourcompany.com"));
  assertEquals(-1,bpmn.indexOf("name=\"from\""));
  assertTrue(bpmn.indexOf("name=\"subject\"") > -1);
  assertTrue(containsStringValue(bpmn,"my subject string"));
  assertEquals(-1,bpmn.indexOf("name=\"cc\""));
  assertEquals(-1,bpmn.indexOf("name=\"bcc\""));
  assertTrue(bpmn.indexOf("name=\"html\"") > -1);
  assertTrue(containsExpression(bpmn,"${my.html.expression}"));
  assertTrue(bpmn.indexOf("name=\"text\"") > -1);
  assertTrue(containsStringValue(bpmn,"my text string"));
}
