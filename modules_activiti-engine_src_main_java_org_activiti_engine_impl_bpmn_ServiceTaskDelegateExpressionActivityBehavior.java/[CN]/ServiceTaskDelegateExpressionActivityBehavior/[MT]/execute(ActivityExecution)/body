{
  Object delegate=expression.getValue(execution);
  if (delegate instanceof ActivityBehavior) {
    ((ActivityBehavior)delegate).execute(execution);
  }
 else   if (delegate instanceof JavaDelegation) {
    ((JavaDelegation)delegate).execute(execution);
  }
 else {
    throw new ActivitiException("Delegate expression " + expression + " did not resolve to an implementation of "+ ActivityBehavior.class+ " nor "+ JavaDelegation.class);
  }
  leave(execution);
}
