{
  for (  FlowElement flowElement : flowElementList) {
    if (flowElement instanceof FlowNode) {
      if (flowSourceMap.containsKey(flowElement.getId())) {
        ((FlowNode)flowElement).getOutgoingFlows().add(flowSourceMap.get(flowElement.getId()));
      }
      if (flowTargetMap.containsKey(flowElement.getId())) {
        ((FlowNode)flowElement).getIncomingFlows().add(flowTargetMap.get(flowElement.getId()));
      }
    }
    if (flowElement instanceof BoundaryEvent) {
      BoundaryEvent boundaryEvent=(BoundaryEvent)flowElement;
      Activity activity=retrieveAttachedRefObject(boundaryEvent.getAttachedToRefId(),process.getFlowElements());
      boundaryEvent.setAttachedToRef(activity);
      activity.getBoundaryEvents().add(boundaryEvent);
    }
 else     if (flowElement instanceof SubProcess) {
      SubProcess subProcess=(SubProcess)flowElement;
      postProcessElements(process,subProcess.getFlowElements(),flowSourceMap,flowTargetMap);
    }
  }
}
