{
  for (  FlowElement flowElement : flowElementList) {
    if (flowElement instanceof BoundaryEvent) {
      BoundaryEvent boundaryEvent=(BoundaryEvent)flowElement;
      Activity activity=retrieveAttachedRefObject(boundaryEvent.getAttachedToRefId(),process.getFlowElements());
      boundaryEvent.setAttachedToRef(activity);
      activity.getBoundaryEvents().add(boundaryEvent);
    }
    if (flowElement instanceof SubProcess) {
      SubProcess subProcess=(SubProcess)flowElement;
      fillAttachedToRef(process,subProcess.getFlowElements());
    }
  }
}
