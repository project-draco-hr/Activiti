{
  RuntimeSession runtimeSession=commandContext.getRuntimeSession();
  ProcessInstanceEntity processInstance=runtimeSession.findProcessInstanceById(scopeInstanceId);
  if (processInstance != null) {
    return processInstance;
  }
  ActivityInstanceEntity activityInstance=runtimeSession.findExecutionById(scopeInstanceId);
  if (activityInstance == null) {
    throw new ActivitiException("scope instance " + scopeInstanceId + " doesn't exist");
  }
  return activityInstance;
}
