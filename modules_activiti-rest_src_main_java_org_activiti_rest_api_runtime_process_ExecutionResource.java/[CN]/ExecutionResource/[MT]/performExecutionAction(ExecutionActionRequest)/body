{
  if (!authenticate()) {
    return null;
  }
  Execution execution=getExecutionFromRequest();
  if (ExecutionActionRequest.ACTION_SIGNAL.equals(actionRequest.getAction())) {
    ActivitiUtil.getRuntimeService().signal(execution.getId());
  }
 else   if (ExecutionActionRequest.ACTION_SIGNAL_EVENT_RECEIVED.equals(actionRequest.getAction())) {
    if (actionRequest.getSignalName() == null) {
      throw new ActivitiIllegalArgumentException("Signal name is required");
    }
    if (actionRequest.getVariables() != null) {
      ActivitiUtil.getRuntimeService().signalEventReceived(actionRequest.getSignalName(),execution.getId(),getVariablesToSet(actionRequest));
    }
 else {
      ActivitiUtil.getRuntimeService().signalEventReceived(actionRequest.getSignalName(),execution.getId());
    }
  }
 else   if (ExecutionActionRequest.ACTION_MESSAGE_EVENT_RECEIVED.equals(actionRequest.getAction())) {
    if (actionRequest.getMessageName() == null) {
      throw new ActivitiIllegalArgumentException("Message name is required");
    }
    if (actionRequest.getVariables() != null) {
      ActivitiUtil.getRuntimeService().messageEventReceived(actionRequest.getMessageName(),execution.getId(),getVariablesToSet(actionRequest));
    }
 else {
      ActivitiUtil.getRuntimeService().messageEventReceived(actionRequest.getMessageName(),execution.getId());
    }
  }
 else {
    throw new ActivitiIllegalArgumentException("Invalid action: '" + actionRequest.getAction() + "'.");
  }
  execution=ActivitiUtil.getRuntimeService().createExecutionQuery().executionId(execution.getId()).singleResult();
  if (execution == null) {
    setStatus(Status.SUCCESS_NO_CONTENT);
    return null;
  }
 else {
    return getApplication(ActivitiRestServicesApplication.class).getRestResponseFactory().createExecutionResponse(this,execution);
  }
}
