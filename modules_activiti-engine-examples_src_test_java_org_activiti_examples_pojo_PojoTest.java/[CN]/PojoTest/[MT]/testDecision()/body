{
  ExpressionManager expressionManager=new ExpressionManager();
  PvmProcessDefinition processDefinition=new ProcessDefinitionBuilder().createActivity("start").initial().behavior(new Automatic()).transition("checkCredit").endActivity().createActivity("checkCredit").behavior(new Decision()).startTransition("takeToGolf").property(Decision.KEY_CONDITION,expressionManager.createValueExpression("${creditRating=='Aaa-'}")).endTransition().startTransition("askDaughterOut").property(Decision.KEY_CONDITION,expressionManager.createValueExpression("${creditRating=='AAA+'}")).endTransition().transition("ignore").endActivity().createActivity("takeToGolf").behavior(new WaitState()).endActivity().createActivity("askDaughterOut").behavior(new WaitState()).endActivity().createActivity("ignore").behavior(new WaitState()).endActivity().buildProcessDefinition();
  PvmProcessInstance processInstance=processDefinition.createProcessInstance();
  processInstance.setVariable("creditRating","Aaa-");
  processInstance.start();
  assertNotNull(processInstance.findActivityInstance("takeToGolf"));
  processInstance=processDefinition.createProcessInstance();
  processInstance.setVariable("creditRating","AAA+");
  processInstance.start();
  assertNotNull(processInstance.findActivityInstance("askDaughterOut"));
  processInstance=processDefinition.createProcessInstance();
  processInstance.setVariable("creditRating","bb-");
  processInstance.start();
  assertNotNull(processInstance.findActivityInstance("ignore"));
}
