{
  if (authenticate() == false)   return null;
  String taskId=(String)getRequest().getAttributes().get("taskId");
  TaskFormData taskFormData=ActivitiUtil.getFormService().getTaskFormData(taskId);
  ObjectNode responseJSON=new ObjectMapper().createObjectNode();
  ArrayNode propertiesJSON=new ObjectMapper().createArrayNode();
  if (taskFormData != null) {
    List<FormProperty> properties=taskFormData.getFormProperties();
    for (    FormProperty property : properties) {
      ObjectNode propertyJSON=new ObjectMapper().createObjectNode();
      propertyJSON.put("id",property.getId());
      propertyJSON.put("name",property.getName());
      if (property.getValue() != null) {
        propertyJSON.put("value",property.getValue());
      }
 else {
        propertyJSON.put("value","null");
      }
      if (property.getType() != null) {
        propertyJSON.put("type",property.getType().getName());
      }
 else {
        propertyJSON.put("type","String");
      }
      propertyJSON.put("required",property.isRequired());
      propertyJSON.put("readable",property.isReadable());
      propertyJSON.put("writable",property.isWritable());
      propertiesJSON.add(propertyJSON);
    }
  }
  responseJSON.put("data",propertiesJSON);
  return responseJSON;
}
