{
  Object newItemId=null;
  if (previousTaskItemId == null) {
    newItemId=addItem();
  }
 else {
    newItemId=addItemAfter(previousTaskItemId);
  }
  Item newItem=getItem(newItemId);
  newItem.getItemProperty("name").setValue(taskName == null ? "my task" : taskName);
  newItem.getItemProperty("assignee").setValue(taskAssignee == null ? "" : taskAssignee);
  newItem.getItemProperty("groups").setValue(taskGroups == null ? "" : taskGroups);
  TextField descriptionTextField=new TextField();
  descriptionTextField.setColumns(16);
  descriptionTextField.setRows(1);
  if (taskDescription != null) {
    descriptionTextField.setValue(taskDescription);
  }
  newItem.getItemProperty("description").setValue(descriptionTextField);
  CheckBox startWithPreviousCheckBox=new CheckBox("start with previous");
  startWithPreviousCheckBox.setValue(startWithPrevious == null ? false : startWithPrevious);
  newItem.getItemProperty("startWithPrevious").setValue(startWithPreviousCheckBox);
  newItem.getItemProperty("actions").setValue(generateActionButtons(newItemId));
  return newItemId;
}
