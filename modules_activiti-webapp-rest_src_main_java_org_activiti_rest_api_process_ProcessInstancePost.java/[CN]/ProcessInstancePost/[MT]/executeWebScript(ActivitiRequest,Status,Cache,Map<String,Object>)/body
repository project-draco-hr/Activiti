{
  ActivitiRequestObject obj=req.getBody();
  String processDefinitionKey=req.getString("processDefinitionKey");
  String processDefinitionId=null;
  if (processDefinitionKey == null) {
    processDefinitionId=req.getMandatoryString(obj,"processDefinitionId");
  }
  String businessKey=req.getString("businessKey");
  Map<String,Object> variables=req.getFormVariables();
  variables.remove("processDefinitionId");
  variables.remove("processDefinitionKey");
  variables.remove("businessKey");
  if (processDefinitionKey != null) {
    model.put("processInstance",getRuntimeService().startProcessInstanceByKey(processDefinitionKey,businessKey,variables));
  }
 else {
    model.put("processInstance",getRuntimeService().startProcessInstanceById(processDefinitionId,businessKey,variables));
  }
}
