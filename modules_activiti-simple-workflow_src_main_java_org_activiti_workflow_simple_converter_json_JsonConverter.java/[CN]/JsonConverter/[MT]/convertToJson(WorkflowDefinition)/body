{
  ObjectMapper objectMapper=new ObjectMapper();
  ObjectNode json=objectMapper.createObjectNode();
  json.put(WORKFLOW_NAME,workflowDefinition.getName());
  if (workflowDefinition.getId() != null) {
    json.put(WORKFLOW_ID,workflowDefinition.getId());
  }
  if (workflowDefinition.getKey() != null) {
    json.put(WORKFLOW_KEY,workflowDefinition.getKey());
  }
  if (workflowDefinition.getDescription() != null) {
    json.put(WORKFLOW_DESCRIPTION,workflowDefinition.getDescription());
  }
  ArrayNode steps=json.putArray(WORKFLOW_STEPS);
  for (  JsonNode stepNode : convertToJson(objectMapper,workflowDefinition.getSteps())) {
    steps.add(stepNode);
  }
  return json;
}
