{
  ProcessInstanceQuery query=ActivitiUtil.getRuntimeService().createProcessInstanceQuery();
  if (queryRequest.getProcessInstanceId() != null) {
    query.processInstanceId(queryRequest.getProcessInstanceId());
  }
  if (queryRequest.getProcessDefinitionKey() != null) {
    query.processDefinitionKey(queryRequest.getProcessDefinitionKey());
  }
  if (queryRequest.getProcessDefinitionId() != null) {
    query.processDefinitionId(queryRequest.getProcessDefinitionId());
  }
  if (queryRequest.getProcessBusinessKey() != null) {
    query.processInstanceBusinessKey(queryRequest.getProcessBusinessKey());
  }
  if (queryRequest.getInvolvedUser() != null) {
    query.involvedUser(queryRequest.getInvolvedUser());
  }
  if (queryRequest.getSuspended() != null) {
    if (queryRequest.getSuspended()) {
      query.suspended();
    }
 else {
      query.active();
    }
  }
  if (queryRequest.getSubProcessInstanceId() != null) {
    query.subProcessInstanceId(queryRequest.getSubProcessInstanceId());
  }
  if (queryRequest.getSuperProcessInstanceId() != null) {
    query.superProcessInstanceId(queryRequest.getSuperProcessInstanceId());
  }
  return new ProcessInstancePaginateList(this).paginateList(urlQuery,query,"id",allowedSortProperties);
}
