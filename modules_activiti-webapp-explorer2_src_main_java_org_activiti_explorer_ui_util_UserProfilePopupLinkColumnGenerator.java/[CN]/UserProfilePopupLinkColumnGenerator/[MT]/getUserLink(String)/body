{
  HorizontalLayout horizontalLayout=new HorizontalLayout();
  horizontalLayout.setSpacing(true);
  Button owner=new Button(user);
  ClickListener buttonClickListener=new ClickListener(){
    private static final long serialVersionUID=4629275955614367780L;
    public void buttonClick(    ClickEvent event){
      ExplorerApplication.getCurrent().showPopupWindow(new ProfilePopupWindow(user));
    }
  }
;
  owner.addStyleName(Reindeer.BUTTON_LINK);
  owner.addListener(buttonClickListener);
  if (renderPicture) {
    Picture picture=identityService.getUserPicture(user);
    if (picture != null) {
      Resource imageResource=new StreamResource(new InputStreamStreamSource(picture.getInputStream()),user + picture.getMimeType(),ExplorerApplication.getCurrent());
      Embedded image=new Embedded("",imageResource);
      image.setType(Embedded.TYPE_IMAGE);
      image.setHeight(30,Embedded.UNITS_PIXELS);
      image.setWidth(30,Embedded.UNITS_PIXELS);
      image.addStyleName(ExplorerLayout.STYLE_PROFILE_PICTURE);
      image.addListener(new MouseEvents.ClickListener(){
        private static final long serialVersionUID=7341560240277898495L;
        public void click(        com.vaadin.event.MouseEvents.ClickEvent event){
          ExplorerApplication.getCurrent().showPopupWindow(new ProfilePopupWindow(user));
        }
      }
);
      horizontalLayout.addComponent(image);
      horizontalLayout.setComponentAlignment(image,Alignment.MIDDLE_LEFT);
    }
 else {
    }
  }
  horizontalLayout.addComponent(owner);
  horizontalLayout.setComponentAlignment(owner,Alignment.MIDDLE_LEFT);
  return horizontalLayout;
}
