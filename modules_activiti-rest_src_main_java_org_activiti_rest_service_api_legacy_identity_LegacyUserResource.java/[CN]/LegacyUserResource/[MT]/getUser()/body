{
  if (authenticate() == false)   return null;
  String userId=(String)getRequest().getAttributes().get("userId");
  if (userId == null) {
    throw new ActivitiIllegalArgumentException("No userId provided");
  }
  User user=ActivitiUtil.getIdentityService().createUserQuery().userId(userId).singleResult();
  LegacyUserInfo response=new LegacyUserInfo(user);
  return response;
}
