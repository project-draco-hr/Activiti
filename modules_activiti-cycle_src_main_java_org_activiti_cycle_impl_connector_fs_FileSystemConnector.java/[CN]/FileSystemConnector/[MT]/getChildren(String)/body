{
  File[] children=null;
  String path="";
  List<RepositoryNode> childNodes=new ArrayList<RepositoryNode>();
  try {
    if (parentId == null || parentId.length() == 0 || "/".equals(parentId)) {
      path=getConfiguration().getBasePath() + "/";
      children=new File(path).listFiles();
    }
 else {
      children=getFileFromId(parentId).listFiles();
    }
    for (    File file : children) {
      if (file.isDirectory()) {
        childNodes.add(getFolderInfo(file));
      }
 else       if (file.isFile()) {
        childNodes.add(getArtifactInfo(file));
      }
 else {
        throw new IllegalStateException("File '" + file + "' is neither a directory nor a file.");
      }
    }
  }
 catch (  Exception ex) {
    throw new RepositoryNodeNotFoundException(getConfiguration().getName(),RepositoryFolder.class,parentId,ex);
  }
  return new RepositoryNodeCollectionImpl(childNodes);
}
