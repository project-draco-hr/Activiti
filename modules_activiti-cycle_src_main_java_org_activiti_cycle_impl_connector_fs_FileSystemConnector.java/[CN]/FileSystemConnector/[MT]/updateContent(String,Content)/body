{
  RepositoryArtifact artifact=getRepositoryArtifact(artifactId);
  String fileName=getBasePath() + artifact.getNodeId();
  File newFile=new File(fileName);
  BufferedOutputStream bos=null;
  try {
    if (newFile.exists()) {
      bos=new BufferedOutputStream(new FileOutputStream(newFile));
      bos.write(content.asByteArray());
    }
 else {
      throw new RepositoryException("File '" + fileName + "' does not exist.");
    }
  }
 catch (  IOException ioe) {
    throw new RepositoryException("Unable to update content of file '" + artifactId + "'",ioe);
  }
 finally {
    if (bos != null) {
      try {
        bos.close();
      }
 catch (      IOException e) {
        throw new RepositoryException("Unable to update content of file '" + artifactId + "'",e);
      }
    }
  }
}
