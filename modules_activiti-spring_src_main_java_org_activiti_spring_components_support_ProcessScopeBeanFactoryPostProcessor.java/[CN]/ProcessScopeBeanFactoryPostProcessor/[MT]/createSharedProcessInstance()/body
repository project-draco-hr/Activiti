{
  ProxyFactory proxyFactoryBean=new ProxyFactory(ProcessInstance.class,new MethodInterceptor(){
    public Object invoke(    MethodInvocation methodInvocation) throws Throwable {
      String methodName=methodInvocation.getMethod().getName();
      logger.info("method invocation for {}.",methodName);
      if (methodName.equals("toString")) {
        return "SharedProcessInstance";
      }
      ProcessInstance processInstance=Context.getExecutionContext().getProcessInstance();
      Method method=methodInvocation.getMethod();
      Object[] args=methodInvocation.getArguments();
      return method.invoke(processInstance,args);
    }
  }
);
  return proxyFactoryBean.getProxy(this.classLoader);
}
