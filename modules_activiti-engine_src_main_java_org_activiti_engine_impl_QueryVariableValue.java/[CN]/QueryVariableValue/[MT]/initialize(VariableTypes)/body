{
  if (variableInstanceEntity == null) {
    Type type=types.findVariableType(value);
    if (type instanceof ByteArrayType) {
      throw new ActivitiException("Variables of type ByteArray cannot be used to query");
    }
 else     if (type instanceof JPAEntityVariableType && operator != QueryOperator.EQUALS) {
      throw new ActivitiException("JPA entity variables can only be used in 'variableValueEquals'");
    }
 else {
      variableInstanceEntity=VariableInstanceEntity.create(name,type,value);
    }
  }
}
