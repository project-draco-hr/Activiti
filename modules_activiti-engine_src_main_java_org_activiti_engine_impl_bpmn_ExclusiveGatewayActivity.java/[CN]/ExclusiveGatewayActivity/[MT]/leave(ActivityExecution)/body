{
  if (log.isLoggable(Level.FINE)) {
    log.fine("Leaving activity '" + execution.getActivity().getId() + "'");
  }
  PvmTransition outgoingSeqFlow=null;
  Iterator<PvmTransition> transitionIterator=execution.getActivity().getOutgoingTransitions().iterator();
  while (outgoingSeqFlow == null && transitionIterator.hasNext()) {
    PvmTransition seqFlow=transitionIterator.next();
    Condition condition=(Condition)seqFlow.getProperty(BpmnParse.PROPERTYNAME_CONDITION);
    if (condition == null || condition.evaluate(execution)) {
      if (log.isLoggable(Level.FINE)) {
        log.fine("Sequence flow '" + seqFlow.getId() + " '"+ "selected as outgoing sequence flow.");
      }
      outgoingSeqFlow=seqFlow;
    }
  }
  if (outgoingSeqFlow != null) {
    execution.take(outgoingSeqFlow);
  }
 else {
    throw new ActivitiException("No outgoing sequence flow of the exclusive gateway '" + execution.getActivity().getId() + "' could be selected for continuing the process");
  }
}
