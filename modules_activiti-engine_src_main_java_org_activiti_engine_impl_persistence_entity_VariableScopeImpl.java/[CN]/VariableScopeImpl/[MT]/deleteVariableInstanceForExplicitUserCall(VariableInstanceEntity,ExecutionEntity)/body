{
  variableInstance.delete();
  variableInstance.setValue(null);
  int historyLevel=Context.getProcessEngineConfiguration().getHistoryLevel();
  if (historyLevel >= ProcessEngineConfigurationImpl.HISTORYLEVEL_AUDIT) {
    updateHistoricVariableInstanceValue(variableInstance);
  }
  if (historyLevel == ProcessEngineConfigurationImpl.HISTORYLEVEL_FULL) {
    HistoricDetailVariableInstanceUpdateEntity historicVariableUpdate=new HistoricDetailVariableInstanceUpdateEntity(variableInstance);
    updateActivityInstanceIdInHistoricVariableUpdate(historicVariableUpdate,sourceActivityExecution);
    Context.getCommandContext().getDbSqlSession().insert(historicVariableUpdate);
  }
}
