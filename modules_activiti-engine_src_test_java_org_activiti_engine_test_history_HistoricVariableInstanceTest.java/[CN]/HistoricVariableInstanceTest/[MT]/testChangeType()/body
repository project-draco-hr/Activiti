{
  ProcessInstance processInstance=runtimeService.startProcessInstanceByKey("oneTaskProcess");
  TaskQuery taskQuery=taskService.createTaskQuery();
  Task task=taskQuery.singleResult();
  assertEquals("my task",task.getName());
  runtimeService.setVariable(processInstance.getId(),"firstVar","123");
  assertEquals("123",getHistoricVariable("firstVar").getValue());
  runtimeService.setVariable(processInstance.getId(),"firstVar","456");
  assertEquals("456",getHistoricVariable("firstVar").getValue());
  runtimeService.setVariable(processInstance.getId(),"firstVar","789");
  assertEquals("789",getHistoricVariable("firstVar").getValue());
  runtimeService.setVariable(processInstance.getId(),"secondVar","123");
  assertEquals("123",getHistoricVariable("secondVar").getValue());
  runtimeService.setVariable(processInstance.getId(),"secondVar",456);
  runtimeService.setVariable(processInstance.getId(),"secondVar","789");
  taskService.complete(task.getId());
  assertProcessEnded(processInstance.getId());
}
