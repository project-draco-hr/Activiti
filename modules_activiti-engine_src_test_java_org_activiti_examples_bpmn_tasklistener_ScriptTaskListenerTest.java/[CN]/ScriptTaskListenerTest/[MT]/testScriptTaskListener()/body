{
  runtimeService.startProcessInstanceByKey("scriptTaskListenerProcess");
  Task task=taskService.createTaskQuery().singleResult();
  assertEquals("Name does not match","All your base are belong to us",task.getName());
  taskService.complete(task.getId());
  HistoricTaskInstance historicTask=historyService.createHistoricTaskInstanceQuery().taskId(task.getId()).singleResult();
  assertEquals("kermit",historicTask.getOwner());
  task=taskService.createTaskQuery().singleResult();
  assertEquals("Task name not set with 'bar' variable","BAR",task.getName());
  Object bar=runtimeService.getVariable(task.getExecutionId(),"bar");
  assertNull("Expected 'bar' variable to be local to script",bar);
  Object foo=runtimeService.getVariable(task.getExecutionId(),"foo");
  assertEquals("Could not find the 'foo' variable in variable scope","FOO",foo);
}
