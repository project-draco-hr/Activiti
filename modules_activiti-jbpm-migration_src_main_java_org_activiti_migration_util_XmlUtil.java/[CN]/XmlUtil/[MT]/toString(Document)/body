{
  try {
    Source source=new DOMSource(document);
    StringWriter stringWriter=new StringWriter();
    Result result=new StreamResult(stringWriter);
    TransformerFactory factory=TransformerFactory.newInstance();
    Transformer transformer=factory.newTransformer();
    transformer.setOutputProperty(OutputKeys.INDENT,"yes");
    transformer.setOutputProperty("{http://xml.apache.org/xslt}indent-amount","2");
    transformer.transform(source,result);
    return stringWriter.getBuffer().toString();
  }
 catch (  Exception e) {
    throw new ActivitiException("Could not transform process definition DOM to String",e);
  }
}
