{
  long nrOfUsers=identityService.createUserQuery().count();
  long usersAdded=0;
  userTrie=new RadixTreeImpl<List<User>>();
  userCache=new HashMap<String,User>();
  keyCache=new HashMap<String,List<String>>();
  while (usersAdded < nrOfUsers) {
    if (LOGGER.isLoggable(Level.INFO)) {
      LOGGER.info("Caching users " + usersAdded + " to "+ (usersAdded + 25));
    }
    List<User> users=identityService.createUserQuery().listPage((int)usersAdded,25);
    for (    User user : users) {
      addTrieItem(user);
      addUserCacheItem(user);
      usersAdded++;
    }
  }
}
