{
  ProcessDefinitionImpl processDefinition=null;
  try {
    processDefinition=(ProcessDefinitionImpl)processDefinitionClass.newInstance();
  }
 catch (  Exception e) {
    throw new ActivitiException("couldn't instantiate process definition '" + processDefinitionClass + "'",e);
  }
  pushContextObject(processDefinition);
  try {
    processDefinition.setKey(processElement.attribute("id"));
    processDefinition.setName(processElement.attribute("name"));
    if (LOG.isLoggable(Level.FINE)) {
      LOG.fine("Parsing process " + processDefinition.getKey());
    }
    parseStartEvents(processElement,processDefinition);
    parseActivities(processElement,processDefinition);
    parseEndEvents(processElement,processDefinition);
    parseBoundaryEvents(processElement,processDefinition);
    parseSequenceFlow(processElement,processDefinition);
  }
  finally {
    popContextObject();
  }
  return processDefinition;
}
