{
  Element conditionExprElement=seqFlowElement.element("conditionExpression");
  if (conditionExprElement != null) {
    String expr=conditionExprElement.getText().trim();
    String type=conditionExprElement.attributeNS(BpmnParser.XSI_NS,"type");
    if (type != null && !type.equals("tFormalExpression")) {
      throw new ActivitiException("Invalid type on conditionExpression (" + conditionExprElement.getLine() + "). "+ "Only tFormalExpression is currently supported");
    }
    String language=conditionExprElement.attribute("language");
    if (language == null) {
      language=ExpressionManager.DEFAULT_EXPRESSION_LANGUAGE;
    }
    Condition condition=null;
    if ("uel-value".equals(language)) {
      condition=new UelValueExpressionCondition(expressionManager.createValueExpression(expr));
    }
 else     if ("uel-method".equals(language)) {
      condition=new UelMethodExpressionCondition(expressionManager.createMethodExpression(expr));
    }
 else {
      throw new ActivitiException("Unknown language for condition: " + language);
    }
    seqFlow.setCondition(condition);
  }
}
