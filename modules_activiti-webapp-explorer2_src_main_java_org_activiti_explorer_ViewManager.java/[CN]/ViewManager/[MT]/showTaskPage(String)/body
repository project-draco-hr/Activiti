{
  Task task=taskService.createTaskQuery().taskId(taskId).singleResult();
  String loggedInUserId=ExplorerApp.get().getLoggedInUser().getId();
  if (task == null) {
    boolean isOwner=historyService.createHistoricTaskInstanceQuery().taskId(taskId).taskOwner(loggedInUserId).count() == 1;
    if (isOwner) {
      showArchivedPage(taskId);
    }
 else {
      showNavigationError(taskId);
    }
  }
 else   if (loggedInUserId.equals(task.getOwner())) {
    showCasesPage(taskId);
  }
 else   if (loggedInUserId.equals(task.getAssignee())) {
    showInboxPage(taskId);
  }
 else   if (taskService.createTaskQuery().taskInvolvedUser(loggedInUserId).count() == 1) {
    showInvolvedPage(taskId);
  }
 else {
    showNavigationError(taskId);
  }
}
