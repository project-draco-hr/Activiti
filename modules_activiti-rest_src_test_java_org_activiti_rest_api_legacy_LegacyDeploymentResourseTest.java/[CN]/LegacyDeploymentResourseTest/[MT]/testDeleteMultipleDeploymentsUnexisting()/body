{
  try {
    ClientResource client=getAuthenticatedClient("deployments/delete");
    ObjectNode requestNode=objectMapper.createObjectNode();
    ArrayNode deploymentIds=objectMapper.createArrayNode();
    deploymentIds.add("unexisting");
    requestNode.put("deploymentIds",deploymentIds);
    try {
      client.post(requestNode);
      fail("Exception expected");
    }
 catch (    ResourceException expected) {
      assertEquals(Status.CLIENT_ERROR_NOT_FOUND,expected.getStatus());
      assertEquals("Could not find a deployment with id 'unexisting'.",expected.getStatus().getDescription());
    }
  }
  finally {
    List<Deployment> deployments=repositoryService.createDeploymentQuery().list();
    for (    Deployment deployment : deployments) {
      repositoryService.deleteDeployment(deployment.getId(),true);
    }
  }
}
