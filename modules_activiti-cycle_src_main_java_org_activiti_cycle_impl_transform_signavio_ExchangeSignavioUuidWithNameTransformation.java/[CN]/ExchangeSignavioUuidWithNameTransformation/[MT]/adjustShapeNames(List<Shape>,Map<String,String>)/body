{
  for (  Shape shape : shapes) {
    if (shape.getProperty("name") != null && shape.getProperty("name").length() > 0) {
      String taskName=shape.getProperty("name");
      String id=shape.getResourceId();
      String newName=adjustNamesForEngine(taskName);
      if (nameMapping.containsKey(newName)) {
        int counter=1;
        while (nameMapping.containsKey(newName + "_" + counter)) {
          counter++;
        }
        newName=newName + "_" + counter;
      }
      nameMapping.put(taskName,newName);
      shape.setResourceId(newName);
    }
    adjustShapeNames(shape.getChildShapes(),nameMapping);
  }
}
