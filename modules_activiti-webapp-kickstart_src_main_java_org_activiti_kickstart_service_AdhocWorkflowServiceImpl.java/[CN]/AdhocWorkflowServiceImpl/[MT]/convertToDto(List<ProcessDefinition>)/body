{
  List<AdhocWorkflowInfo> dtos=new ArrayList<AdhocWorkflowInfo>();
  for (  ProcessDefinition processDefinition : processDefinitions) {
    AdhocWorkflowInfo dto=new AdhocWorkflowInfo();
    dto.setId(processDefinition.getId());
    dto.setKey(processDefinition.getKey());
    dto.setName(processDefinition.getName());
    dto.setVersion(processDefinition.getVersion());
    dto.setDeploymentId(processDefinition.getDeploymentId());
    Date deploymentTime=repositoryService.createDeploymentQuery().deploymentId(processDefinition.getDeploymentId()).singleResult().getDeploymentTime();
    dto.setCreateTime(deploymentTime);
    dto.setNrOfRuntimeInstances(historyService.createHistoricProcessInstanceQuery().processDefinitionId(processDefinition.getId()).unfinished().count());
    dto.setNrOfHistoricInstances(historyService.createHistoricProcessInstanceQuery().processDefinitionId(processDefinition.getId()).finished().count());
    dtos.add(dto);
  }
  return dtos;
}
