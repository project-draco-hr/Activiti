{
  User user=userCache.findUser(event.getUserId());
  String eventAuthor="<span class='" + ExplorerLayout.STYLE_TASK_EVENT_AUTHOR + "'>"+ user.getFirstName()+ " "+ user.getLastName()+ "</span> ";
  String text=null;
  if (Event.ACTION_ADD_IDENTITY_LINK.equals(event.getAction())) {
    User involvedUser=userCache.findUser(event.getMessageParts().get(0));
    if (involvedUser != null) {
      text=i18nManager.getMessage(Messages.EVENT_ADD_IDENTITYLINK,eventAuthor,involvedUser.getFirstName() + " " + involvedUser.getLastName(),event.getMessageParts().get(2));
    }
 else {
      text=i18nManager.getMessage(Messages.EVENT_ADD_IDENTITYLINK,eventAuthor,event.getMessageParts().get(1),event.getMessageParts().get(2));
    }
  }
 else   if (Event.ACTION_ADD_ATTACHMENT.equals(event.getAction())) {
    text=i18nManager.getMessage(Messages.EVENT_ADD_ATTACHMENT,eventAuthor,event.getMessage());
  }
 else   if (Event.ACTION_ADD_COMMENT.equals(event.getAction())) {
    text=i18nManager.getMessage(Messages.EVENT_COMMENT,eventAuthor,event.getMessage());
  }
 else {
    text+=i18nManager.getMessage(Messages.EVENT_DEFAULT,eventAuthor,event.getMessage());
  }
  return new Label(text,Label.CONTENT_XHTML);
}
