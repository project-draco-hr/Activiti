{
  int historyLevel=Context.getProcessEngineConfiguration().getHistoryLevel();
  if (historyLevel >= ProcessEngineConfigurationImpl.HISTORYLEVEL_AUDIT) {
    List<HistoricDetailEntity> historicDetails=(List)new HistoricDetailQueryImpl(Context.getCommandContext()).processInstanceId(historicProcessInstanceId).list();
    for (    HistoricDetailEntity historicDetail : historicDetails) {
      historicDetail.delete();
    }
  }
  if (historyLevel >= ProcessEngineConfigurationImpl.HISTORYLEVEL_ACTIVITY) {
    dbSqlSession.delete("deleteHistoricActivityInstancesByProcessInstanceId",historicProcessInstanceId);
  }
  if (historyLevel >= ProcessEngineConfigurationImpl.HISTORYLEVEL_AUDIT) {
    dbSqlSession.delete("deleteHistoricTaskInstancesByProcessInstanceId",historicProcessInstanceId);
  }
  if (historyLevel > ProcessEngineConfigurationImpl.HISTORYLEVEL_NONE) {
    dbSqlSession.delete(HistoricProcessInstanceEntity.class,historicProcessInstanceId);
  }
}
