{
  ProcessDefinitionImpl processDefinition=((ExecutionEntity)execution).getProcessDefinition();
  ActivityImpl borderEventActivity=processDefinition.findActivity(borderEventActivityId);
  if (borderEventActivity == null) {
    throw new ActivitiException(borderEventActivityId + " not found in process definition");
  }
  ActivityImpl catchingScope=borderEventActivity.getParentActivity();
  if (catchingScope == null) {
    throw new ActivitiException(borderEventActivityId + " is suppossed to be a nested activity, " + "but no parent activity can be found.");
  }
  boolean matchingParentFound=false;
  ActivityExecution parentExecution=execution;
  ActivityImpl parentActivity=(ActivityImpl)execution.getActivity().getParent();
  while (!matchingParentFound && parentExecution != null && parentActivity != null) {
    if (parentExecution.isScope() && !parentExecution.isConcurrent() && parentActivity.getId().equals(catchingScope.getId())) {
      matchingParentFound=true;
    }
 else     if (parentExecution.isConcurrent()) {
      parentExecution=parentExecution.getParent();
    }
 else     if (parentExecution.isScope()) {
      parentActivity=parentActivity.getParentActivity();
      parentExecution=parentExecution.getParent();
    }
  }
  if (matchingParentFound && parentExecution != null) {
    parentExecution.executeActivity(borderEventActivity);
  }
 else {
    throw new ActivitiException("No matching parent execution for activity " + borderEventActivityId + " found");
  }
}
