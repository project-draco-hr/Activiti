{
  int start=req.getInteger("start",0);
  int size=req.getInteger("size",10);
  String sort=req.getString("sort",defaultSort);
  String order=req.getString("order","asc");
  if (sort != null && properties.size() > 0) {
    QueryProperty qp=properties.get(sort);
    if (qp == null) {
      throw new WebScriptException(Status.STATUS_BAD_REQUEST,"Value for param 'sort' is not valid, '" + sort + "' is not a valid property");
    }
    ((AbstractQuery)query).orderBy(qp);
    if (order.equals("asc")) {
      query.asc();
    }
 else     if (order.equals("desc")) {
      query.desc();
    }
 else {
      throw new WebScriptException(Status.STATUS_BAD_REQUEST,"Value for param 'order' is not valid : '" + order + "', must be 'asc' or 'desc'");
    }
  }
  List list=query.listPage(start,size);
  model.put("start",start);
  model.put("size",list.size());
  model.put("sort",sort);
  model.put("order",order);
  model.put("total",query.count());
  model.put(listName,list);
}
