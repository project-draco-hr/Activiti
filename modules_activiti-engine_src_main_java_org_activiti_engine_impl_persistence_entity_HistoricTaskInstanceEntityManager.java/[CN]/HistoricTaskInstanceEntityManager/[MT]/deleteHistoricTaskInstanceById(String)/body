{
  if (getHistoryManager().isHistoryEnabled()) {
    HistoricTaskInstanceEntity historicTaskInstance=findHistoricTaskInstanceById(taskId);
    if (historicTaskInstance != null) {
      CommandContext commandContext=Context.getCommandContext();
      commandContext.getHistoricDetailEntityManager().deleteHistoricDetailsByTaskId(taskId);
      commandContext.getHistoricVariableInstanceEntityManager().deleteHistoricVariableInstancesByTaskId(taskId);
      commandContext.getCommentEntityManager().deleteCommentsByTaskId(taskId);
      commandContext.getAttachmentEntityManager().deleteAttachmentsByTaskId(taskId);
      getDbSqlSession().delete(historicTaskInstance);
    }
  }
}
