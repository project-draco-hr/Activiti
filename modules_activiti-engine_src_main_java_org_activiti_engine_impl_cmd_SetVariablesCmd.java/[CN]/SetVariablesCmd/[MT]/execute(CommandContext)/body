{
  if (executionId == null) {
    throw new ActivitiException("executionId is null");
  }
  ExecutionEntity execution=commandContext.getRuntimeSession().findExecutionById(executionId);
  if (execution == null) {
    throw new ActivitiException("execution " + executionId + " doesn't exist");
  }
  try {
    VariableMap.setExternalUpdate(Boolean.TRUE);
    execution.setVariables(variables);
  }
  finally {
    VariableMap.setExternalUpdate(null);
  }
  return null;
}
