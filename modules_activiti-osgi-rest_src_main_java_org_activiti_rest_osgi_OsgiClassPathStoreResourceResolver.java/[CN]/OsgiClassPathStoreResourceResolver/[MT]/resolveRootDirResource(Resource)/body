{
  Resource resolved=super.resolveRootDirResource(original);
  if (resolved == original) {
    try {
      URL url=original.getURL();
      URLConnection con=url.openConnection();
      try {
        Method mth=con.getClass().getMethod("getLocalURL");
        mth.setAccessible(true);
        URL localUrl=(URL)mth.invoke(con);
        if (localUrl != null) {
          return new UrlResource(localUrl);
        }
      }
 catch (      NoSuchMethodException t) {
        Object targetModule=getField(con,"m_targetModule");
        int classPathIdx=(Integer)getField(con,"m_classPathIdx");
        Object content;
        if (classPathIdx == 0) {
          content=getField(targetModule,"m_content");
        }
 else {
          Object[] contentPath=(Object[])getField(targetModule,"m_contentPath");
          content=contentPath[classPathIdx - 1];
        }
        URL localUrl=getContentUrl(content,url.getPath());
        return new UrlResource(localUrl);
      }
    }
 catch (    Throwable t) {
      logger.debug("Could not resolve url");
    }
  }
  return original;
}
