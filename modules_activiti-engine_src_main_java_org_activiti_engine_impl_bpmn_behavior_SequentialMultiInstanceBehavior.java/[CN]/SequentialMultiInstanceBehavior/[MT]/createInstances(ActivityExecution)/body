{
  int nrOfInstances=resolveNrOfInstances(execution);
  if (nrOfInstances <= 0) {
    throw new ActivitiException("Invalid number of instances: must be positive integer value" + ", but was " + nrOfInstances);
  }
  setLoopVariable(execution,NUMBER_OF_INSTANCES,nrOfInstances);
  setLoopVariable(execution,NUMBER_OF_COMPLETED_INSTANCES,0);
  setLoopVariable(execution,LOOP_COUNTER,0);
  setLoopVariable(execution,NUMBER_OF_ACTIVE_INSTANCES,1);
  logLoopDetails(execution,"initialized",0,0,1,nrOfInstances);
  executeOriginalBehavior(execution,0);
}
