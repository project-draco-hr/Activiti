{
  Map<String,Object> vars=new HashMap<String,Object>();
  vars.put("bytesVar","test".getBytes());
  vars.put("serializableVar",new DummySerializable());
  ProcessInstance processInstance=runtimeService.startProcessInstanceByKey("oneTaskProcess",vars);
  try {
    runtimeService.createExecutionQuery().variableValueEquals("bytesVar","test".getBytes()).list();
    fail("Expected exception");
  }
 catch (  ActivitiException ae) {
    assertTextPresent("Variables of type ByteArray cannot be used to query",ae.getMessage());
  }
  try {
    runtimeService.createExecutionQuery().variableValueEquals("serializableVar",new DummySerializable()).list();
    fail("Expected exception");
  }
 catch (  ActivitiException ae) {
    assertTextPresent("Variables of type ByteArray cannot be used to query",ae.getMessage());
  }
  runtimeService.deleteProcessInstance(processInstance.getId(),"test");
}
