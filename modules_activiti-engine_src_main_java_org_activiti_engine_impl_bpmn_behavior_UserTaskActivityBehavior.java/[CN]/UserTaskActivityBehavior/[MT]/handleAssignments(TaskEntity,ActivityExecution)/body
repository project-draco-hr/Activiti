{
  if (taskDefinition.getAssigneeExpression() != null) {
    task.setAssignee((String)taskDefinition.getAssigneeExpression().getValue(execution));
  }
  if (!taskDefinition.getCandidateGroupIdExpressions().isEmpty()) {
    for (    Expression groupIdExpr : taskDefinition.getCandidateGroupIdExpressions()) {
      Object value=groupIdExpr.getValue(execution);
      if (value instanceof String) {
        List<String> candiates=extractCandidates((String)value);
        task.addCandidateGroups(candiates);
      }
 else       if (value instanceof Collection) {
        task.addCandidateGroups((Collection)value);
      }
 else {
        throw new ActivitiException("Expression did not resolve to a string or collection of strings");
      }
    }
  }
  if (!taskDefinition.getCandidateUserIdExpressions().isEmpty()) {
    for (    Expression userIdExpr : taskDefinition.getCandidateUserIdExpressions()) {
      Object value=userIdExpr.getValue(execution);
      if (value instanceof String) {
        List<String> candiates=extractCandidates((String)value);
        task.addCandidateUsers(candiates);
      }
 else       if (value instanceof Collection) {
        task.addCandidateUsers((Collection)value);
      }
 else {
        throw new ActivitiException("Expression did not resolve to a string or collection of strings");
      }
    }
  }
}
