{
  KickstartWorkflowDto dto=new KickstartWorkflowDto();
  dto.setName("One Service Task Workflow");
  dto.setDescription("Simple workflow definition containing one service task");
  MailTaskDto task=new MailTaskDto();
  task.setId("myId");
  task.setName("My First Mail task");
  task.setDescription("Desc first Mail task");
  task.getTo().setStringValue("my favorite recipient");
  dto.addTask(task);
  Definitions def=dto.toBpmn20Xml();
  BPMNPlane bpmnPlane=def.getDiagram().get(0).getBPMNPlane();
  List<FlowElement> flowElements=((Process)bpmnPlane.getBpmnElement()).getFlowElement();
  assertEquals(5,flowElements.size());
  int numberOfServiceTasks=0;
  ServiceTask serviceTask=null;
  for (  FlowElement flowElement : flowElements) {
    if (flowElement instanceof ServiceTask) {
      numberOfServiceTasks++;
      serviceTask=(ServiceTask)flowElement;
    }
  }
  assertEquals("Should contain exactly one service task with type mail",1,numberOfServiceTasks);
  assertEquals("mail",serviceTask.getType());
  assertEquals("Should have extenstion elements",1,serviceTask.getExtensionElements().getAny().size());
  assertEquals("Should have extenstion element 'to'","to",((ActivitFieldExtensionElement)serviceTask.getExtensionElements().getAny().get(0)).getName());
  assertEquals("Extenstion element 'to' should contain string value","my favorite recipient",((ActivitFieldExtensionElement)serviceTask.getExtensionElements().getAny().get(0)).getStringValue());
}
