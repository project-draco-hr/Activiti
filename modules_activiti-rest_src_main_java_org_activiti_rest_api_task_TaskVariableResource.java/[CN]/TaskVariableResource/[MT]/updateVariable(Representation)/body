{
  if (authenticate() == false)   return null;
  String variableName=getAttribute("variableName");
  if (variableName == null) {
    throw new ActivitiIllegalArgumentException("The variableName cannot be null");
  }
  Task task=getTaskFromRequest();
  RestVariable result=null;
  if (representation.getMediaType() != null && MediaType.MULTIPART_FORM_DATA.isCompatible(representation.getMediaType())) {
    result=setBinaryVariable(representation,task,false);
    if (!result.getName().equals(variableName)) {
      throw new ActivitiIllegalArgumentException("Variable name in the body should be equal to the name used in the requested URL.");
    }
  }
 else {
    try {
      RestVariable restVariable=getConverterService().toObject(representation,RestVariable.class,this);
      if (restVariable == null) {
        throw new ResourceException(new Status(Status.CLIENT_ERROR_UNSUPPORTED_MEDIA_TYPE.getCode(),"Invalid body was supplied",null,null));
      }
      if (!restVariable.getName().equals(variableName)) {
        throw new ActivitiIllegalArgumentException("Variable name in the body should be equal to the name used in the requested URL.");
      }
      result=setSimpleVariable(restVariable,task,false);
    }
 catch (    IOException ioe) {
      throw new ResourceException(Status.SERVER_ERROR_INTERNAL,ioe);
    }
  }
  return result;
}
