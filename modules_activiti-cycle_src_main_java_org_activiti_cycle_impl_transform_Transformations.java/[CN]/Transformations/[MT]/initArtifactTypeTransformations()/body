{
  if (fromArtifactTypeTransformations == null || toArtifactTypeTransformations == null) {
synchronized (this) {
      if (fromMimeTypeTransformations != null && toArtifactTypeTransformations != null) {
        return;
      }
      fromArtifactTypeTransformations=new HashMap<RepositoryArtifactType,Set<ContentArtifactTypeTransformation>>();
      toArtifactTypeTransformations=new HashMap<RepositoryArtifactType,Set<ContentArtifactTypeTransformation>>();
      Set<Class<ContentArtifactTypeTransformation>> contentMimeTypeTransformations=CycleComponentFactory.getAllImplementations(ContentArtifactTypeTransformation.class);
      for (      Class<ContentArtifactTypeTransformation> transformationClass : contentMimeTypeTransformations) {
        ContentArtifactTypeTransformation transformation=CycleApplicationContext.get(transformationClass);
        RepositoryArtifactType sourceType=transformation.getSourceType();
        RepositoryArtifactType targetType=transformation.getTargetType();
        Set<ContentArtifactTypeTransformation> sourceSet=fromArtifactTypeTransformations.get(sourceType);
        if (sourceSet == null) {
          sourceSet=new HashSet<ContentArtifactTypeTransformation>();
          fromArtifactTypeTransformations.put(sourceType,sourceSet);
        }
        sourceSet.add(transformation);
        Set<ContentArtifactTypeTransformation> targetSet=toArtifactTypeTransformations.get(targetType);
        if (targetSet == null) {
          targetSet=new HashSet<ContentArtifactTypeTransformation>();
          toArtifactTypeTransformations.put(targetType,targetSet);
        }
        targetSet.add(transformation);
      }
    }
  }
}
