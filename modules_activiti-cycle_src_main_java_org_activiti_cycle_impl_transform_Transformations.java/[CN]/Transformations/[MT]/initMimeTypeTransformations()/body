{
  if (fromMimeTypeTransformations == null || toMimeTypeTransformations == null) {
synchronized (this) {
      if (fromMimeTypeTransformations != null && toMimeTypeTransformations != null) {
        return;
      }
      fromMimeTypeTransformations=new HashMap<MimeType,Set<ContentMimeTypeTransformation>>();
      toMimeTypeTransformations=new HashMap<MimeType,Set<ContentMimeTypeTransformation>>();
      Set<Class<ContentMimeTypeTransformation>> contentMimeTypeTransformations=CycleComponentFactory.getAllImplementations(ContentMimeTypeTransformation.class);
      for (      Class<ContentMimeTypeTransformation> transformationClass : contentMimeTypeTransformations) {
        ContentMimeTypeTransformation transformation=CycleApplicationContext.get(transformationClass);
        MimeType sourceType=transformation.getSourceType();
        MimeType targetType=transformation.getTargetType();
        Set<ContentMimeTypeTransformation> sourceSet=fromMimeTypeTransformations.get(sourceType);
        if (sourceSet == null) {
          sourceSet=new HashSet<ContentMimeTypeTransformation>();
          fromMimeTypeTransformations.put(sourceType,sourceSet);
        }
        sourceSet.add(transformation);
        Set<ContentMimeTypeTransformation> targetSet=toMimeTypeTransformations.get(targetType);
        if (targetSet == null) {
          targetSet=new HashSet<ContentMimeTypeTransformation>();
          toMimeTypeTransformations.put(targetType,targetSet);
        }
        targetSet.add(transformation);
      }
    }
  }
}
