{
  Task task=taskService.newTask();
  task.setName("testTask");
  taskService.saveTask(task);
  String taskId=task.getId();
  taskService.addCandidateUser(taskId,"kermit");
  taskService.addCandidateUser(taskId,"gonzo");
  List<Task> tasks=taskService.createTaskQuery().candidateUser("kermit").list();
  assertEquals(1,tasks.size());
  assertEquals("testTask",tasks.get(0).getName());
  tasks=taskService.createTaskQuery().candidateUser("gonzo").list();
  assertEquals(1,tasks.size());
  assertEquals("testTask",tasks.get(0).getName());
  taskService.claim(taskId,"kermit");
  assertTrue(taskService.createTaskQuery().candidateUser("kermit").list().isEmpty());
  assertTrue(taskService.createTaskQuery().candidateUser("gonzo").list().isEmpty());
  taskService.complete(taskId);
  assertNull(taskService.createTaskQuery().taskId(taskId).singleResult());
}
