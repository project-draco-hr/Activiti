{
  String artifactId=getMandatoryString(req,"artifactId");
  String actionId=getMandatoryString(req,"actionName");
  String cuid=getCurrentUserId(req);
  HttpSession session=((WebScriptServletRequest)req).getHttpServletRequest().getSession(true);
  RepositoryConnector conn=SessionUtil.getRepositoryConnector(cuid,session);
  RepositoryArtifact artifact=conn.getRepositoryArtifact(artifactId);
  if (artifact == null) {
    throw new WebScriptException(Status.STATUS_NOT_FOUND,"There is no artifact with id '" + artifactId + "'.");
  }
  String form=null;
  for (  ParameterizedAction action : artifact.getArtifactType().getParameterizedActions()) {
    if (action.getId().equals(actionId)) {
      form=action.getFormAsHtml();
      break;
    }
  }
  if (form != null) {
    model.put("form",form);
  }
 else {
    throw new WebScriptException(Status.STATUS_NOT_FOUND,"There is no form for action '" + actionId + "'.");
  }
}
