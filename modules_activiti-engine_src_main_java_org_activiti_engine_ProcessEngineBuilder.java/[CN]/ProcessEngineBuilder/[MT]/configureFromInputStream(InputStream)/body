{
  if (inputStream == null) {
    throw new ActivitiException("inputStream is null");
  }
  ConfigurationParser cfgParser=new ConfigurationParser();
  ConfigurationParse cfgParse=cfgParser.createParse().sourceInputStream(inputStream).execute();
  String processEngineName=cfgParse.getProcessEngineName();
  if (processEngineName != null) {
    processEngineConfiguration.setProcessEngineName(processEngineName);
  }
  String databaseName=cfgParse.getDatabaseName();
  if (databaseName != null) {
    processEngineConfiguration.setDatabaseName(databaseName);
  }
  String databaseSchemaStrategy=cfgParse.getDatabaseSchemaStrategy();
  if (databaseSchemaStrategy != null) {
    processEngineConfiguration.setDbSchemaStrategy(databaseSchemaStrategy);
  }
  if (cfgParse.isJdbcConfigured()) {
    String databaseUrl=cfgParse.getJdbcUrl();
    if (databaseUrl != null) {
      processEngineConfiguration.setJdbcUrl(databaseUrl);
    }
    String databaseDriver=cfgParse.getJdbcDriver();
    if (databaseDriver != null) {
      processEngineConfiguration.setJdbcDriver(databaseDriver);
    }
    String databaseUsername=cfgParse.getJdbcUsername();
    if (databaseUsername != null) {
      processEngineConfiguration.setJdbcUsername(databaseUsername);
    }
    String databasePassword=cfgParse.getJdbcPassword();
    if (databasePassword != null) {
      processEngineConfiguration.setJdbcPassword(databasePassword);
    }
  }
  String mailServerHost=cfgParse.getMailServerHost();
  if (mailServerHost != null) {
    processEngineConfiguration.setMailServerHost(mailServerHost);
  }
  Integer mailServerPort=cfgParse.getMailServerPort();
  if (mailServerPort != null) {
    processEngineConfiguration.setMailServerPort(mailServerPort);
  }
  String mailServerUsername=cfgParse.getMailServerUsername();
  if (mailServerUsername != null) {
    processEngineConfiguration.setMailServerUsername(mailServerUsername);
  }
  String mailServerPassword=cfgParse.getMailServerPassword();
  if (mailServerPassword != null) {
    processEngineConfiguration.setMailServerPassword(mailServerPassword);
  }
  String mailDefaultFrom=cfgParse.getMailDefaultFrom();
  if (mailDefaultFrom != null) {
    processEngineConfiguration.setMailServerDefaultFrom(mailDefaultFrom);
  }
  Boolean jobExecutorAutoActivate=cfgParse.getIsJobExecutorAutoActivate();
  if (jobExecutorAutoActivate != null) {
    processEngineConfiguration.setJobExecutorAutoActivate(jobExecutorAutoActivate);
  }
  Integer historyLevel=cfgParse.getHistoryLevel();
  if (historyLevel != null) {
    processEngineConfiguration.setHistoryLevel(historyLevel);
  }
  return this;
}
