{
  Deployment deployment=repositoryService.createDeploymentQuery().deploymentId(deploymentId).singleResult();
  if (deployment == null) {
    throw new ActivitiObjectNotFoundException("Could not find a deployment with id '" + deploymentId + "'.",Deployment.class);
  }
  List<String> resourceList=repositoryService.getDeploymentResourceNames(deploymentId);
  String serverRootUrl=request.getRequestURL().toString();
  serverRootUrl=serverRootUrl.substring(0,serverRootUrl.indexOf("/repository/deployments/"));
  if (resourceList.contains(resourceId)) {
    return restResponseFactory.createDeploymentResourceResponse(deploymentId,resourceId,contentTypeResolver.resolveContentType(resourceId),serverRootUrl);
  }
 else {
    throw new ActivitiObjectNotFoundException("Could not find a resource with id '" + resourceId + "' in deployment '"+ deploymentId+ "'.",String.class);
  }
}
