{
  if (value == null) {
    return null;
  }
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  ObjectOutputStream ois=null;
  try {
    ois=new ObjectOutputStream(baos);
    ois.writeObject(value);
  }
 catch (  Exception e) {
    throw new ActivitiException("coudn't serialize value '" + value + "' in variable '"+ valueFields.getName()+ "'",e);
  }
 finally {
    IoUtil.closeSilently(ois);
  }
  return baos.toByteArray();
}
