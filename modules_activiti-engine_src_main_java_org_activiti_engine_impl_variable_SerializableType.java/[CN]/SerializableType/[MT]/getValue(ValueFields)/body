{
  Object cachedObject=valueFields.getCachedValue();
  if (cachedObject != null) {
    return cachedObject;
  }
  byte[] bytes=(byte[])super.getValue(valueFields);
  if (bytes != null) {
    ByteArrayInputStream bais=new ByteArrayInputStream(bytes);
    try {
      ObjectInputStream ois=createObjectInputStream(bais);
      Object deserializedObject=ois.readObject();
      valueFields.setCachedValue(deserializedObject);
      if (valueFields instanceof VariableInstanceEntity) {
        Context.getCommandContext().getDbSqlSession().addDeserializedObject(deserializedObject,bytes,(VariableInstanceEntity)valueFields);
      }
      return deserializedObject;
    }
 catch (    Exception e) {
      throw new ActivitiException("Couldn't deserialize object in variable '" + valueFields.getName() + "'",e);
    }
 finally {
      IoUtil.closeSilently(bais);
    }
  }
  return null;
}
