{
  CommandContext context=commandContextFactory.createCommandContext(command);
  try {
    CommandContext.setCurrentCommandContext(context);
    Context.setCommandContext(context);
    Context.setProcessEngineContext(processEngineContext);
    return next.execute(command);
  }
 catch (  Exception e) {
    context.exception(e);
  }
 finally {
    try {
      context.close();
    }
  finally {
      CommandContext.removeCurrentCommandContext();
      Context.removeCommandContext();
      Context.removeProcessEngineContext();
    }
  }
  return null;
}
