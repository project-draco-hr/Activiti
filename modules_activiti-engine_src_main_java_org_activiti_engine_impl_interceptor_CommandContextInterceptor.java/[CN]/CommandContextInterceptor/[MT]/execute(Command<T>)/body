{
  CommandContext context=commandContextFactory.createCommandContext(command);
  try {
    Context.setCommandContext(context);
    Context.setProcessEngineConfiguration(processEngineConfiguration);
    return next.execute(command);
  }
 catch (  Exception e) {
    context.exception(e);
  }
 finally {
    try {
      context.close();
    }
  finally {
      Context.removeCommandContext();
      Context.removeProcessEngineConfiguration();
    }
  }
  return null;
}
