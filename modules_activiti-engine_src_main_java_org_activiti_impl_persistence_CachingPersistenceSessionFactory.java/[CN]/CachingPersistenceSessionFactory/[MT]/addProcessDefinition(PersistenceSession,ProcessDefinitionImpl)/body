{
  if (processDefinition == null) {
    return;
  }
  if (processDefinition.isNew()) {
    persistenceSession.insertProcessDefinition(processDefinition);
  }
 else {
    String deploymentId=processDefinition.getDeployment().getId();
    ProcessDefinitionImpl persistedProcessDefinition=persistenceSession.findProcessDefinitionByDeploymentAndKey(deploymentId,processDefinition.getKey());
    processDefinition.setId(persistedProcessDefinition.getId());
    processDefinition.setVersion(persistedProcessDefinition.getVersion());
  }
  add(processDefinition);
}
