{
  TreeValueExpression e1, e2;
  e1=new TreeValueExpression(store,null,context.getVariableMapper(),null,"${1}",Object.class);
  e2=new TreeValueExpression(store,null,context.getVariableMapper(),null,"${1}",Object.class);
  assertEquals(e1,e2);
  assertEquals(e1.hashCode(),e2.hashCode());
  e1=new TreeValueExpression(store,null,context.getVariableMapper(),null,"${var_long_1}",Object.class);
  e2=new TreeValueExpression(store,null,context.getVariableMapper(),null,"${var_long_2}",Object.class);
  assertEquals(e1,e2);
  assertEquals(e1.hashCode(),e2.hashCode());
  e1=new TreeValueExpression(store,null,context.getVariableMapper(),null,"${var_var_long_1}",Object.class);
  e2=new TreeValueExpression(store,null,context.getVariableMapper(),null,"${var_var_long_2}",Object.class);
  assertEquals(e1,e2);
  assertEquals(e1.hashCode(),e2.hashCode());
  e1=new TreeValueExpression(store,null,context.getVariableMapper(),null,"${var_long_1}",Object.class);
  context.getVariableMapper().setVariable("var_long_1",new TreeValueExpression(store,null,context.getVariableMapper(),null,"${-1}",Object.class));
  e2=new TreeValueExpression(store,null,context.getVariableMapper(),null,"${var_long_1}",Object.class);
  assertFalse(e1.equals(e2));
  e1=new TreeValueExpression(store,null,context.getVariableMapper(),null,"${var_foo_1}",Object.class);
  e2=new TreeValueExpression(store,null,context.getVariableMapper(),null,"${var_foo_2}",Object.class);
  assertEquals(e1,e2);
  assertEquals(e1.hashCode(),e2.hashCode());
  e2=new TreeValueExpression(store,context.getFunctionMapper(),null,null,"${ns:foo_1()}",Object.class);
  e1=new TreeValueExpression(store,context.getFunctionMapper(),null,null,"${ns:foo_2()}",Object.class);
  assertEquals(e1,e2);
  assertEquals(e1.hashCode(),e2.hashCode());
  e2=new TreeValueExpression(store,context.getFunctionMapper(),null,null,"${foo()}",Object.class);
  e1=new TreeValueExpression(store,context.getFunctionMapper(),null,null,"${ns:foo_1()}",Object.class);
  assertEquals(e1,e2);
  assertEquals(e1.hashCode(),e2.hashCode());
  e2=new TreeValueExpression(store,context.getFunctionMapper(),null,null,"${foo()}",Object.class);
  context.setFunction("","foo",getClass().getMethod("bar"));
  e1=new TreeValueExpression(store,context.getFunctionMapper(),null,null,"${foo()}",Object.class);
  assertFalse(e1.equals(e2));
  e2=new TreeValueExpression(store,context.getFunctionMapper(),null,null,"${ns:foo_1()}",Object.class);
  context.setFunction("ns","foo_1",getClass().getMethod("bar"));
  e1=new TreeValueExpression(store,context.getFunctionMapper(),null,null,"${ns:foo_1()}",Object.class);
  assertFalse(e1.equals(e2));
}
