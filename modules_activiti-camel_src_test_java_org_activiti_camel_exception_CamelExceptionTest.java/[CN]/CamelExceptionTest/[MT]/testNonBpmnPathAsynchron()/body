{
  ThrowBpmnExceptionBean.setExceptionType(ThrowBpmnExceptionBean.ExceptionType.NON_BPMN_EXCEPTION);
  runtimeService.startProcessInstanceByKey("exceptionInRouteSynchron");
  assertTrue(areJobsAvailable());
  int nErrorJobs=(int)managementService.createJobQuery().count();
  assertEquals(1,nErrorJobs);
  nErrorJobs=(int)managementService.createJobQuery().count();
  waitForJobExecutorToProcessAllJobs(10000000,100);
  assertEquals(1,managementService.createJobQuery().count());
  assertEquals("Unhandled exception on camel route",managementService.createJobQuery().singleResult().getExceptionMessage());
  assertFalse(ExceptionServiceMock.isCalled());
  assertFalse(NoExceptionServiceMock.isCalled());
  assertFalse(areJobsAvailable());
}
