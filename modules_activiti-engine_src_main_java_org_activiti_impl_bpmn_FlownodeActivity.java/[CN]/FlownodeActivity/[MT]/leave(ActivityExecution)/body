{
  if (LOG.isLoggable(Level.FINE)) {
    LOG.fine("Leaving activity '" + execution.getActivity().getId() + "'");
  }
  List<Transition> outgoingSequenceFlow=execution.getOutgoingTransitions();
  if (outgoingSequenceFlow.size() == 1) {
    execution.take(outgoingSequenceFlow.get(0));
  }
 else   if (outgoingSequenceFlow.size() > 1) {
    ConcurrencyScope scopeInstance=execution.getConcurrencyScope();
    for (    Transition transition : outgoingSequenceFlow) {
      if (transition.getCondition() == null || transition.getCondition().evaluate(execution)) {
        ActivityExecution concurrentExecution=scopeInstance.createExecution();
        concurrentExecution.take(transition);
      }
    }
    execution.setActive(false);
    execution.setActivity(null);
  }
 else {
    if (LOG.isLoggable(Level.FINE)) {
      LOG.fine("No outgoing sequence flow found for " + execution.getActivity().getId() + ". Ending execution.");
    }
    execution.end();
  }
}
