{
  this.xtr=xtr;
  this.model=model;
  this.activeSubProcessList=activeSubProcessList;
  this.boundaryList=boundaryList;
  String elementId=xtr.getAttributeValue(null,"id");
  String elementName=xtr.getAttributeValue(null,"name");
  boolean async=parseAsync();
  boolean notExclusive=parseNotExclusive();
  String defaultFlow=xtr.getAttributeValue(null,"default");
  BaseElement parsedElement=parseElement();
  if (parsedElement instanceof Artifact) {
    Artifact currentArtifact=(Artifact)parsedElement;
    currentArtifact.setId(elementId);
    if (isInSubProcess(activeSubProcessList)) {
      final SubProcess currentSubProcess=activeSubProcessList.get(activeSubProcessList.size() - 2);
      currentSubProcess.getArtifacts().add(currentArtifact);
    }
 else {
      activeProcess.getArtifacts().add(currentArtifact);
    }
  }
  if (parsedElement instanceof FlowElement) {
    FlowElement currentFlowElement=(FlowElement)parsedElement;
    currentFlowElement.setId(elementId);
    currentFlowElement.setName(elementName);
    if (currentFlowElement instanceof Activity) {
      Activity activity=(Activity)currentFlowElement;
      activity.setAsynchronous(async);
      activity.setNotExclusive(notExclusive);
      if (StringUtils.isNotEmpty(defaultFlow)) {
        activity.setDefaultFlow(defaultFlow);
      }
    }
    if (currentFlowElement instanceof Gateway) {
      if (StringUtils.isNotEmpty(defaultFlow)) {
        ((Gateway)currentFlowElement).setDefaultFlow(defaultFlow);
      }
    }
    if (currentFlowElement instanceof SubProcess) {
      if (isInSubProcess(activeSubProcessList)) {
        activeSubProcessList.get(activeSubProcessList.size() - 2).addFlowElement(currentFlowElement);
      }
 else {
        activeProcess.addFlowElement(currentFlowElement);
      }
    }
 else     if (activeSubProcessList.size() > 0) {
      activeSubProcessList.get(activeSubProcessList.size() - 1).addFlowElement(currentFlowElement);
    }
 else {
      activeProcess.addFlowElement(currentFlowElement);
    }
  }
}
