{
  Collection<StateHandlerRegistration> registrationCollection=new ArrayList<StateHandlerRegistration>();
  String regKeyFull=registrationKey(processName,stateName);
  String regKeyWithJustState=registrationKey(null,stateName);
  for (  String k : this.registrations.keySet())   if (k.contains(regKeyFull)) {
    registrationCollection.add(this.registrations.get(k));
  }
  if (registrationCollection.size() == 0) {
    for (    String k : this.registrations.keySet()) {
      if (k.contains(regKeyWithJustState)) {
        registrationCollection.add(this.registrations.get(k));
      }
    }
  }
  return registrationCollection;
}
