{
  AttachmentEntity attachment=commandContext.getDbSqlSession().selectById(AttachmentEntity.class,attachmentId);
  commandContext.getDbSqlSession().delete(attachment);
  if (attachment.getContentId() != null) {
    commandContext.getByteArrayManager().deleteByteArrayById(attachment.getContentId());
  }
  if (attachment.getTaskId() != null) {
    commandContext.getHistoryManager().createAttachmentComment(attachment.getTaskId(),attachment.getProcessInstanceId(),attachment.getName(),false);
  }
  return null;
}
