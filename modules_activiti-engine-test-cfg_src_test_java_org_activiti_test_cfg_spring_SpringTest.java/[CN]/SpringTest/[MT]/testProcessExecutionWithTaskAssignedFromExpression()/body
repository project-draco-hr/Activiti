{
  int before=processEngine.getTaskService().findAssignedTasks("kermit").size();
  ProcessInstance processInstance=processEngine.getRuntimeService().startProcessInstanceByKey("taskAssigneeExpressionProcess");
  assertEquals("[theTask]",processInstance.findActivityIds().toString());
  ProcessInstanceEntity processInstanceEntity=(ProcessInstanceEntity)processInstance;
  ActivityInstanceImpl activityInstance=processInstanceEntity.getActivityInstances().iterator().next();
  assertEquals("${user}",((TaskDefinition)ReflectionTestUtils.getField(((ActivityImpl)activityInstance.getActivity()).getActivityBehavior(),"taskDefinition")).getAssignee());
  List<Task> tasks=processEngine.getTaskService().findAssignedTasks("kermit");
  assertEquals(before + 1,tasks.size());
  processEngine.getRuntimeService().endProcessInstance(processInstance.getId());
}
