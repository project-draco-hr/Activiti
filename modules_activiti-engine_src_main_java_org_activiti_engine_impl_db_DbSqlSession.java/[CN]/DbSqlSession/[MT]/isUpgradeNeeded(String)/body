{
  if (ProcessEngine.VERSION.equals(versionInDatabase)) {
    return false;
  }
  Double cleanDbVersion=getCleanVersion(versionInDatabase);
  Double cleanEngineVersion=getCleanVersion(ProcessEngine.VERSION);
  if (cleanDbVersion.compareTo(cleanEngineVersion) > 0) {
    throw new ActivitiException("Version of activiti database (" + versionInDatabase + ") is more recent than the engine ("+ ProcessEngine.VERSION+ ")");
  }
 else   if (cleanDbVersion.compareTo(cleanEngineVersion) == 0) {
    log.warn("Engine-version is the same, but not an exact match: {} vs. {}. Not performing database-upgrade.",versionInDatabase,ProcessEngine.VERSION);
    return false;
  }
  return true;
}
