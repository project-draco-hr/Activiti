{
  removeUnnecessaryOperations();
  flushDeserializedObjects();
  List<PersistentObject> updatedObjects=getUpdatedObjects();
  if (log.isLoggable(Level.FINE)) {
    log.fine("flush summary:");
    for (    PersistentObject insertedObject : insertedObjects) {
      log.fine("  insert " + toString(insertedObject));
    }
    for (    PersistentObject updatedObject : updatedObjects) {
      log.fine("  update " + toString(updatedObject));
    }
    for (    Object deleteOperation : deleteOperations) {
      log.fine("  " + deleteOperation);
    }
    log.fine("now executing flush...");
  }
  flushInserts();
  flushUpdates(updatedObjects);
  flushDeletes();
}
