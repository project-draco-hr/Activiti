{
  removeUnnecessaryOperations();
  flushDeserializedObjects();
  List<PersistentObject> updatedObjects=getUpdatedObjects();
  if (log.isDebugEnabled()) {
    log.debug("flush summary:");
    for (    PersistentObject insertedObject : insertedObjects) {
      log.debug("  insert {}",toString(insertedObject));
    }
    for (    PersistentObject updatedObject : updatedObjects) {
      log.debug("  update {}",toString(updatedObject));
    }
    for (    Object deleteOperation : deleteOperations) {
      log.debug("  {}",deleteOperation);
    }
    log.debug("now executing flush...");
  }
  flushInserts();
  flushUpdates(updatedObjects);
  flushDeletes();
}
