{
  List<PersistentObject> updatedObjects=new ArrayList<PersistentObject>();
  for (  Class<?> clazz : cachedObjects.keySet()) {
    Map<String,CachedObject> classCache=cachedObjects.get(clazz);
    for (    CachedObject cachedObject : classCache.values()) {
      PersistentObject persistentObject=(PersistentObject)cachedObject.getPersistentObject();
      if (!deletedObjects.contains(persistentObject)) {
        Object originalState=cachedObject.getPersistentObjectState();
        if (!persistentObject.getPersistentState().equals(originalState)) {
          updatedObjects.add(persistentObject);
        }
 else {
          log.finest("loaded object '" + persistentObject + "' was not updated");
        }
      }
    }
  }
  return updatedObjects;
}
