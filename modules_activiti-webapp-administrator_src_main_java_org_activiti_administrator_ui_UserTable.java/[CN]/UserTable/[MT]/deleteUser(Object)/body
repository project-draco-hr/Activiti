{
  final String id=getItem(target).getItemProperty("id").toString();
  Set<String> assignedTasks=app.getAdminService().getAssignedTaskIds(id);
  Set<String> unassignedTasks=app.getAdminService().getUnassignedTaskIds(id);
  String message="";
  if (!assignedTasks.isEmpty() || !unassignedTasks.isEmpty()) {
    message=app.getMessage(Messages.DeleteUserAffectsTasks) + "<ul>";
    if (!assignedTasks.isEmpty()) {
      message=message + "<li>" + app.getMessage(Messages.AssignedTasks)+ assignedTasks+ "</li>";
    }
    if (!unassignedTasks.isEmpty()) {
      message=message + "<li>" + app.getMessage(Messages.UnassignedTasks)+ unassignedTasks+ "</li>";
    }
    message=message + "</ul><br/>";
  }
 else {
    message=app.getMessage(Messages.DeleteUserAffectsNoTasks) + "<br/><br/>";
  }
  ConfirmDialog dialog=new ConfirmDialog(app.getMessage(Messages.ConfirmDelete) + id,message,app.getMessage(Messages.OkKey),app.getMessage(Messages.CancelKey),new ConfirmDialog.ConfirmationDialogCallback(){
    public void response(    boolean ok){
      if (ok) {
        app.getAdminService().deleteUser(id);
        app.getAdminService().getUsers().removeItem(target);
        app.getMainWindow().showNotification(app.getMessage(Messages.DeletedUser) + id);
      }
    }
  }
);
  dialog.addStyleName(Consts.POPUP);
  app.getMainWindow().addWindow(dialog);
}
