{
  RepositoryConnector connector=null;
  RuntimeConnectorList connectorList=CycleSessionContext.getFromCurrentContext(RuntimeConnectorList.class);
  for (  RepositoryConnector thisConnector : connectorList.connectors) {
    if (!thisConnector.getConfiguration().getId().equals(connectorId)) {
      continue;
    }
    connector=thisConnector;
  }
  if (connector == null) {
    throw new RuntimeException("Cannot login to repository with id '" + connectorId + "', no such repository.");
  }
  String username=null;
  String password=null;
  if (connector.getConfiguration() instanceof PasswordEnabledRepositoryConnectorConfiguration) {
    PasswordEnabledRepositoryConnectorConfiguration passwordEnabledRepositoryConnectorConfiguration=(PasswordEnabledRepositoryConnectorConfiguration)connector.getConfiguration();
    username=passwordEnabledRepositoryConnectorConfiguration.getUser();
    password=passwordEnabledRepositoryConnectorConfiguration.getPassword();
  }
  String req_username=req.getString(connectorId + "_username");
  String req_password=req.getString(connectorId + "_password");
  if (req_username != null) {
    username=req_username;
  }
  if (req_password != null) {
    password=req_password;
  }
  try {
    CycleServiceFactory.getRepositoryService().login(username,password,connectorId);
  }
 catch (  RepositoryException ex) {
    throw new RepositoryAuthenticationException("Cannot login to repository '" + connectorId + "'.",connectorId,ex);
  }
}
