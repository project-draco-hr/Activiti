{
  RepositoryConnector connector=null;
  RuntimeConnectorList connectorList=CycleSessionContext.getFromCurrentContext(RuntimeConnectorList.class);
  connector=connectorList.getConnectorById(connectorId);
  if (connector == null) {
    throw new RuntimeException("Cannot login to repository with id '" + connectorId + "', no such repository.");
  }
  String username=null;
  String password=null;
  if (connector.getConfiguration() instanceof PasswordEnabledRepositoryConnectorConfiguration) {
    PasswordEnabledRepositoryConnectorConfiguration passwordEnabledRepositoryConnectorConfiguration=(PasswordEnabledRepositoryConnectorConfiguration)connector.getConfiguration();
    username=passwordEnabledRepositoryConnectorConfiguration.getUser();
    password=passwordEnabledRepositoryConnectorConfiguration.getPassword();
  }
  try {
    CycleServiceFactory.getRepositoryService().login(username,password,connectorId);
  }
 catch (  RepositoryException ex) {
    throw new RepositoryAuthenticationException("Cannot login to repository '" + connectorId + "'.",connectorId,ex);
  }
}
