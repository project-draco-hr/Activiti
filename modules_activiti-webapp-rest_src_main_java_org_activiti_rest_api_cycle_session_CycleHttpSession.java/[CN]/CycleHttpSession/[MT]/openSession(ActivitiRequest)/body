{
  HttpSession httpSession=req.getHttpServletRequest().getSession(true);
  String cuid=req.getCurrentUserId();
  CycleComponentFactory.registerServletContext(httpSession.getServletContext());
  CycleSessionContext.setContext(new HttpSessionContext(httpSession));
  CycleSessionContext.set("cuid",cuid);
  CycleRequestContext.setContext(new CycleMapContext());
  for (  CycleRequestFilter requestFilter : requestFilters) {
    requestFilter.beforeRequest(req);
  }
}
