{
  HttpSession httpSession=req.getHttpServletRequest().getSession(true);
  int sessionTimeout=httpSession.getMaxInactiveInterval();
  if (sessionTimeout < 7200) {
    httpSession.setMaxInactiveInterval(7200);
  }
  String cuid=req.getCurrentUserId();
  CycleComponentFactory.registerServletContext(httpSession.getServletContext());
  CycleSessionContext.setContext(new HttpSessionContext(httpSession));
  CycleSessionContext.set("cuid",cuid);
  CycleRequestContext.setContext(new CycleMapContext());
  for (  CycleRequestFilter requestFilter : requestFilters) {
    requestFilter.beforeRequest(req);
  }
}
