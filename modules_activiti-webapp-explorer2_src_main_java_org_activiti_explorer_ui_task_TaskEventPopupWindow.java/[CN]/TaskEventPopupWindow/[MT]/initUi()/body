{
  addStyleName(Reindeer.WINDOW_LIGHT);
  setModal(true);
  setHeight("50%");
  setWidth("40%");
  center();
  HorizontalLayout layout=new HorizontalLayout();
  layout.setWidth("100%");
  layout.setSpacing(true);
  addComponent(layout);
  final Picture picture=identityService.getUserPicture(user.getId());
  if (picture != null) {
    StreamResource imageresource=new StreamResource(new StreamSource(){
      private static final long serialVersionUID=-8875067466181823014L;
      public InputStream getStream(){
        return picture.getInputStream();
      }
    }
,user.getId(),ExplorerApp.get());
    Embedded author=new Embedded("",imageresource);
    author.setType(Embedded.TYPE_IMAGE);
    author.setHeight("200px");
    author.setWidth("200px");
    author.addStyleName(ExplorerLayout.STYLE_PROFILE_PICTURE);
    layout.addComponent(author);
  }
  VerticalLayout eventLayout=new VerticalLayout();
  eventLayout.setSpacing(true);
  eventLayout.setWidth("70%");
  layout.addComponent(eventLayout);
  layout.setExpandRatio(eventLayout,1.0f);
  Label header=new Label(i18nManager.getMessage(Messages.TASK_COMMENT_POPUP_HEADER,new PrettyTime().format(taskEvent.getTime()),user.getFirstName() + " " + user.getLastName()));
  header.addStyleName(ExplorerLayout.STYLE_TASK_EVENT_AUTHOR);
  eventLayout.addComponent(header);
  Label text=new Label(taskEvent.getMessage());
  eventLayout.addComponent(text);
}
