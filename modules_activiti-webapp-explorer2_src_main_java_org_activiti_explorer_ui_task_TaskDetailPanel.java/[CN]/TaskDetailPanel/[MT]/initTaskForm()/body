{
  TaskFormData formData=formService.getTaskFormData(task.getId());
  if (formData != null && formData.getFormProperties() != null && formData.getFormProperties().size() > 0) {
    taskForm=new FormPropertiesForm();
    taskForm.setSubmitButtonCaption("Complete task");
    taskForm.setCancelButtonCaption("Reset form");
    taskForm.setFormProperties(formData.getFormProperties());
    taskForm.addListener(new FormPropertiesEventListener(){
      private static final long serialVersionUID=-3893467157397686736L;
      @Override protected void handleFormSubmit(      FormPropertiesEvent event){
        Map<String,String> properties=event.getFormProperties();
        formService.submitTaskFormData(task.getId(),properties);
        ExplorerApplication.getCurrent().getMainWindow().showNotification("Task '" + task.getName() + "' completed");
        parent.refreshCurrentTasks();
      }
      @Override protected void handleFormCancel(      FormPropertiesEvent event){
        taskForm.clear();
      }
    }
);
    leftPanel.addComponent(taskForm);
  }
}
