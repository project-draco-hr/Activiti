{
  ClientResource client=getAuthenticatedClient("process-instance");
  ObjectNode requestNode=objectMapper.createObjectNode();
  requestNode.put("processDefinitionKey","simpleProcess");
  Representation response=client.post(requestNode);
  JsonNode responseNode=objectMapper.readTree(response.getStream());
  assertNotNull(responseNode);
  String processInstanceId=responseNode.get("processInstanceId").getValueAsText();
  assertNotNull(processInstanceId);
  List<ProcessInstance> instanceList=runtimeService.createProcessInstanceQuery().list();
  assertEquals(1,instanceList.size());
  assertEquals(processInstanceId,instanceList.get(0).getProcessInstanceId());
  Task task=taskService.createTaskQuery().taskAssignee("kermit").singleResult();
  assertNotNull(task);
  assertEquals("WaitTask",task.getName());
  taskService.complete(task.getId());
  instanceList=runtimeService.createProcessInstanceQuery().list();
  assertEquals(0,instanceList.size());
}
