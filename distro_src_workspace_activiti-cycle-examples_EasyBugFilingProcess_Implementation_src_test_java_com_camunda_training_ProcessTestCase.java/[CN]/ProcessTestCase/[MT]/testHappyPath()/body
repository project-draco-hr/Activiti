{
  HashMap<String,Object> variables=new HashMap<String,Object>();
  variables.put("email","bernd.ruecker@camunda.com");
  ProcessInstance processInstance=runtimeService.startProcessInstanceByKey("EasyBugFilingProcess",variables);
  String id=processInstance.getId();
  System.out.println("Started process instance id " + id);
  assertInActivity(id,"Handle_bug");
  Task task=taskService.createTaskQuery().taskAssignee("kermit").singleResult();
  variables=new HashMap<String,Object>();
  variables.put("isBug",Boolean.TRUE);
  taskService.complete(task.getId(),variables);
  assertProcessEnded(id);
  HistoricProcessInstance historicProcessInstance=historicDataService.createHistoricProcessInstanceQuery().processInstanceId(id).singleResult();
  assertNotNull(historicProcessInstance);
  System.out.println("Finished, took " + historicProcessInstance.getDurationInMillis() + " millis");
}
