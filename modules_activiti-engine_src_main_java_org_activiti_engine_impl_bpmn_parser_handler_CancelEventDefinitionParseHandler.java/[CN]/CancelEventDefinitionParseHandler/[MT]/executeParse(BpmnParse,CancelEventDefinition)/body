{
  BpmnModel bpmnModel=bpmnParse.getBpmnModel();
  if (bpmnParse.getCurrentFlowElement() instanceof BoundaryEvent) {
    ActivityImpl activity=bpmnParse.getCurrentActivity();
    activity.setProperty("type","cancelBoundaryCatch");
    ActivityImpl parent=(ActivityImpl)activity.getParent();
    if (!parent.getProperty("type").equals("transaction")) {
      bpmnModel.addProblem("boundary event with cancelEventDefinition only supported on transaction subprocesses.",cancelEventDefinition);
    }
    for (    ActivityImpl child : parent.getActivities()) {
      if (child.getProperty("type").equals("cancelBoundaryCatch") && child != activity) {
        bpmnModel.addProblem("multiple boundary events with cancelEventDefinition not supported on same transaction subprocess.",cancelEventDefinition);
      }
    }
    activity.setActivityBehavior(bpmnParse.getActivityBehaviorFactory().createCancelBoundaryEventActivityBehavior(cancelEventDefinition));
  }
}
