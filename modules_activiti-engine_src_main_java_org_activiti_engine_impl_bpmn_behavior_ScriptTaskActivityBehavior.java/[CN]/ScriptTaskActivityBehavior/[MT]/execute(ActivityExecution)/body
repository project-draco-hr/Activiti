{
  ScriptingEngines scriptingEngines=Context.getProcessEngineConfiguration().getScriptingEngines();
  boolean noErrors=true;
  try {
    Object result=scriptingEngines.evaluate(script,language,execution,storeScriptVariables);
    if (resultVariable != null) {
      execution.setVariable(resultVariable,result);
    }
  }
 catch (  ActivitiException e) {
    LOGGER.warn("Exception while executing " + execution.getActivity().getId() + " : "+ e.getMessage());
    noErrors=false;
    if (e.getCause() instanceof ScriptException && e.getCause().getCause() instanceof ScriptException && e.getCause().getCause().getCause() instanceof BpmnError) {
      ErrorPropagation.propagateError((BpmnError)e.getCause().getCause().getCause(),execution);
    }
 else {
      throw e;
    }
  }
  if (noErrors) {
    leave(execution);
  }
}
