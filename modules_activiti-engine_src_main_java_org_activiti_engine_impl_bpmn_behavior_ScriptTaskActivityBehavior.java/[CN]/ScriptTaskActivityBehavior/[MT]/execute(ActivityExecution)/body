{
  ScriptingEngines scriptingEngines=Context.getProcessEngineConfiguration().getScriptingEngines();
  boolean noErrors=true;
  try {
    Object result=scriptingEngines.evaluate(script,language,execution,storeScriptVariables);
    if (resultVariable != null) {
      execution.setVariable(resultVariable,result);
    }
  }
 catch (  ActivitiException e) {
    LOGGER.warn("Exception while executing " + execution.getActivity().getId() + " : "+ e.getMessage());
    noErrors=false;
    Throwable rootCause=ExceptionUtils.getRootCause(e);
    if (rootCause instanceof BpmnError) {
      ErrorPropagation.propagateError((BpmnError)rootCause,execution);
    }
 else {
      throw e;
    }
  }
  if (noErrors) {
    leave(execution);
  }
}
