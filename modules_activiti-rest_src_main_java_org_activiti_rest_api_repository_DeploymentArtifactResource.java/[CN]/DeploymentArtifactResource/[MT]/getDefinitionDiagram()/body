{
  if (authenticate() == false)   return null;
  String deploymentId=(String)getRequest().getAttributes().get("deploymentId");
  String resourceName=(String)getRequest().getAttributes().get("resourceName");
  if (deploymentId == null) {
    throw new ActivitiException("No deployment id provided");
  }
  final InputStream resourceStream=ActivitiUtil.getRepositoryService().getResourceAsStream(deploymentId,resourceName);
  if (resourceStream == null) {
    throw new ActivitiException("No resource with name " + resourceName + " could be found");
  }
  InputRepresentation output=new InputRepresentation(resourceStream);
  return output;
}
