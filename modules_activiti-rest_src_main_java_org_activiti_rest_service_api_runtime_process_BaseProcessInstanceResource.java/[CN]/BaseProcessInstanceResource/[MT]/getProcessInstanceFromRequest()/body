{
  String processInstanceId=getAttribute("processInstanceId");
  if (processInstanceId == null) {
    throw new ActivitiIllegalArgumentException("The processInstanceId cannot be null");
  }
  ProcessInstance processInstance=ActivitiUtil.getRuntimeService().createProcessInstanceQuery().processInstanceId(processInstanceId).singleResult();
  if (processInstance == null) {
    throw new ActivitiObjectNotFoundException("Could not find a process instance with id '" + processInstanceId + "'.",ProcessInstance.class);
  }
  return processInstance;
}
