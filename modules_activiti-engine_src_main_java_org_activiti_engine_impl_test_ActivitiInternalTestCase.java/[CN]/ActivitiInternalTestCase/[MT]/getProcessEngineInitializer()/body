{
  String processEngineInitializerClassName=null;
  ClassLoader classLoader=Thread.currentThread().getContextClassLoader();
  InputStream initializersInputStream=classLoader.getResourceAsStream("activiti.initializer.properties");
  if (initializersInputStream != null) {
    Properties properties=new Properties();
    try {
      properties.load(initializersInputStream);
      processEngineInitializerClassName=properties.getProperty("process.engine.initializer");
      if (processEngineInitializerClassName != null) {
        Class<?> processEngineInitializerClass=Class.forName(processEngineInitializerClassName,true,classLoader);
        return (ProcessEngineInitializer)processEngineInitializerClass.newInstance();
      }
    }
 catch (    Exception e) {
      throw new RuntimeException("couldn't instantiate process engine initializer " + properties + ": "+ e,e);
    }
  }
  return new DefaultProcessEngineInitializer();
}
