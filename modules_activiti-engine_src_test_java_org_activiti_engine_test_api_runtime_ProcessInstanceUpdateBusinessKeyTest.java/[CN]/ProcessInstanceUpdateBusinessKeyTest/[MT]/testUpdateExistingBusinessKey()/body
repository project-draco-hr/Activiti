{
  runtimeService.startProcessInstanceByKey("businessKeyProcess","testKey");
  ProcessInstance processInstance=runtimeService.createProcessInstanceQuery().singleResult();
  assertEquals("testKey",processInstance.getBusinessKey());
  HistoricProcessInstance historicProcessInstance=historyService.createHistoricProcessInstanceQuery().singleResult();
  assertEquals("testKey",historicProcessInstance.getBusinessKey());
  runtimeService.updateBusinessKey(processInstance.getId(),"newKey");
  processInstance=runtimeService.createProcessInstanceQuery().singleResult();
  assertEquals("newKey",processInstance.getBusinessKey());
  historicProcessInstance=historyService.createHistoricProcessInstanceQuery().singleResult();
  assertEquals("newKey",historicProcessInstance.getBusinessKey());
}
