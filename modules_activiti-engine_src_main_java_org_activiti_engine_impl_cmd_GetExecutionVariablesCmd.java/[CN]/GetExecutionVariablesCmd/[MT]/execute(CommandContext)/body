{
  if (executionId == null) {
    throw new ActivitiIllegalArgumentException("executionId is null");
  }
  ExecutionEntity execution=commandContext.getExecutionEntityManager().findExecutionById(executionId);
  if (execution == null) {
    throw new ActivitiObjectNotFoundException("execution " + executionId + " doesn't exist",Execution.class);
  }
  Map<String,Object> executionVariables;
  if (isLocal) {
    executionVariables=execution.getVariablesLocal();
  }
 else {
    executionVariables=execution.getVariables();
  }
  if (variableNames != null && variableNames.size() > 0) {
    Map<String,Object> tempVariables=new HashMap<String,Object>();
    for (    String variableName : variableNames) {
      if (executionVariables.containsKey(variableName)) {
        tempVariables.put(variableName,executionVariables.get(variableName));
      }
    }
    executionVariables=tempVariables;
  }
  return executionVariables;
}
