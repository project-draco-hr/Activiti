{
  JSONObjectBuilder builder=objectBuilders.get(getTemplateKey(template));
  if (builder == null) {
    throw new WebScriptException(Status.STATUS_INTERNAL_SERVER_ERROR,"Template " + template + " is registered on this this processor.");
  }
  try {
    JSONObject resultObject=builder.createJsonObject(model);
    writeJSON(resultObject,out);
  }
 catch (  JSONException jsone) {
    throw new WebScriptException(Status.STATUS_INTERNAL_SERVER_ERROR,"Error while creating JSONObject from model",jsone);
  }
}
