{
  ArrayList<Shape> childShapes=diagram.getChildShapes();
  ArrayList<Shape> extractedChildShapes=new ArrayList<Shape>();
  Shape pool=null;
  if ((pool=checkForProcessEnginePoolExecutable(childShapes)) == null) {
    if (poolName != null && poolName.length() > 0) {
      pool=checkForProcessEnginePoolName(childShapes,poolName);
    }
  }
  if (pool != null) {
    extractedChildShapes.add(pool);
    for (    Shape childShape : childShapes) {
      if ("SequenceFlow".equals(childShape.getStencilId()) && edgeIsContainedIn(childShape,pool)) {
        extractedChildShapes.add(childShape);
      }
    }
    doCleanupOnShapes(pool,null);
    diagram.setChildShapes(extractedChildShapes);
  }
 else {
  }
  return diagram;
}
