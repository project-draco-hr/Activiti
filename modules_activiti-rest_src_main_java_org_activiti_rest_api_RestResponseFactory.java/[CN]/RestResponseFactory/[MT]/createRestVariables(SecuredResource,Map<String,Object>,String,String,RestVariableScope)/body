{
  List<RestVariable> result=new ArrayList<RestVariable>();
  RestVariable restVar=null;
  for (  Entry<String,Object> pair : variables.entrySet()) {
    RestVariableConverter converter=null;
    restVar=new RestVariable();
    restVar.setVariableScope(scope);
    restVar.setName(pair.getKey());
    result.add(restVar);
    if (pair.getValue() != null) {
      for (      RestVariableConverter c : variableConverters) {
        if (pair.getValue().getClass().isAssignableFrom(c.getVariableType())) {
          converter=c;
          break;
        }
      }
      if (converter != null) {
        converter.convertVariableValue(pair.getValue(),restVar);
        restVar.setType(converter.getRestTypeName());
      }
 else {
        if (pair.getValue() instanceof Byte[] || pair.getValue() instanceof byte[]) {
          restVar.setType(BYTE_ARRAY_VARIABLE_TYPE);
        }
 else {
          restVar.setType(SERIALIZABLE_VARIABLE_TYPE);
        }
        if (taskId != null) {
          restVar.setValueUrl(securedResource.createFullResourceUrl(RestUrls.URL_TASK_VARIABLE_DATA,taskId,pair.getKey()));
        }
      }
    }
  }
  return result;
}
