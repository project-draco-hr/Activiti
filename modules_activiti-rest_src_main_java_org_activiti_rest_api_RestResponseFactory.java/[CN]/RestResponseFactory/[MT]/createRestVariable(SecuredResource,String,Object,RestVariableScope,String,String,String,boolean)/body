{
  RestVariableConverter converter=null;
  RestVariable restVar=new RestVariable();
  restVar.setVariableScope(scope);
  restVar.setName(name);
  if (value != null) {
    for (    RestVariableConverter c : variableConverters) {
      if (value.getClass().isAssignableFrom(c.getVariableType())) {
        converter=c;
        break;
      }
    }
    if (converter != null) {
      converter.convertVariableValue(value,restVar);
      restVar.setType(converter.getRestTypeName());
    }
 else {
      if (value instanceof Byte[] || value instanceof byte[]) {
        restVar.setType(BYTE_ARRAY_VARIABLE_TYPE);
      }
 else {
        restVar.setType(SERIALIZABLE_VARIABLE_TYPE);
      }
      if (includeBinaryValue) {
        restVar.setValue(value);
      }
      if (taskId != null) {
        restVar.setValueUrl(securedResource.createFullResourceUrl(RestUrls.URL_TASK_VARIABLE_DATA,taskId,name));
      }
      if (executionId != null) {
        restVar.setValueUrl(securedResource.createFullResourceUrl(RestUrls.URL_EXECUTION_VARIABLE_DATA,executionId,name));
      }
      if (processInstanceId != null) {
        restVar.setValueUrl(securedResource.createFullResourceUrl(RestUrls.URL_PROCESS_INSTANCE_VARIABLE_DATA,processInstanceId,name));
      }
    }
  }
  return restVar;
}
