{
  ProcessInstance processInstance1=runtimeService.startProcessInstanceByKey("aOneTaskProcess");
  ProcessInstance processInstance2=runtimeService.startProcessInstanceByKey("bOneTaskProcess");
  ProcessInstance processInstance3=runtimeService.startProcessInstanceByKey("cOneTaskProcess");
  ObjectNode requestNode=objectMapper.createObjectNode();
  requestNode.put("order","desc");
  requestNode.put("sort","processDefinitionKey");
  String url=RestUrls.createRelativeResourceUrl(RestUrls.URL_PROCESS_INSTANCE_QUERY);
  HttpPost httpPost=new HttpPost(SERVER_URL_PREFIX + url);
  httpPost.setEntity(new StringEntity(requestNode.toString()));
  CloseableHttpResponse response=executeRequest(httpPost,HttpStatus.SC_OK);
  JsonNode rootNode=objectMapper.readTree(response.getEntity().getContent());
  closeResponse(response);
  JsonNode dataNode=rootNode.get("data");
  assertEquals(3,dataNode.size());
  assertEquals(processInstance3.getId(),dataNode.get(0).get("id").asText());
  assertEquals(processInstance2.getId(),dataNode.get(1).get("id").asText());
  assertEquals(processInstance1.getId(),dataNode.get(2).get("id").asText());
  requestNode=objectMapper.createObjectNode();
  requestNode.put("start",0);
  requestNode.put("size",1);
  httpPost.setEntity(new StringEntity(requestNode.toString()));
  response=executeRequest(httpPost,HttpStatus.SC_OK);
  rootNode=objectMapper.readTree(response.getEntity().getContent());
  closeResponse(response);
  dataNode=rootNode.get("data");
  assertEquals(1,dataNode.size());
  requestNode=objectMapper.createObjectNode();
  requestNode.put("start",1);
  requestNode.put("size",1);
  requestNode.put("order","desc");
  requestNode.put("sort","processDefinitionKey");
  httpPost.setEntity(new StringEntity(requestNode.toString()));
  response=executeRequest(httpPost,HttpStatus.SC_OK);
  rootNode=objectMapper.readTree(response.getEntity().getContent());
  closeResponse(response);
  dataNode=rootNode.get("data");
  assertEquals(1,dataNode.size());
  assertEquals(processInstance2.getId(),dataNode.get(0).get("id").asText());
}
