{
  Date startTime=new Date();
  ClockUtil.setCurrentTime(startTime);
  runtimeService.startProcessInstanceByKey("multiInstanceReceiveWithTimer");
  List<Execution> executions=runtimeService.createExecutionQuery().activityId("theReceiveTask").list();
  assertEquals(3,executions.size());
  runtimeService.signal(executions.get(1).getId());
  ClockUtil.setCurrentTime(new Date(startTime.getTime() + 60000L));
  waitForJobExecutorToProcessAllJobs(10000L,1000L);
  Task task=taskService.createTaskQuery().singleResult();
  assertEquals("Task after timer",task.getName());
  taskService.complete(task.getId());
  assertEquals(0,runtimeService.createExecutionQuery().count());
}
